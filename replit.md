# AXION - نظام إدارة مشاريع المقاولات
نظام متكامل لإدارة مشاريع المقاولات مبني بـ Vite + React + Express + PostgreSQL

## هيكل المشروع
- **الواجهة**: Vite + React + shadcn/ui + TailwindCSS
- **الخادم**: Express.js + Socket.IO
- **قاعدة البيانات**: PostgreSQL + Drizzle ORM
- **المشترك**: نماذج البيانات والأنواع في `shared/schema.ts`

## الأنظمة الأساسية (48 جدول)
1. **المصادقة والأمان**: تسجيل دخول/خروج، JWT، صلاحيات، سجلات تدقيق
2. **إدارة المشاريع**: إنشاء/تعديل/حذف، أنواع مشاريع، تحويلات مالية
3. **إدارة العمال**: حضور، أجور، حوالات، نثريات، تسويات
4. **الموردين والمشتريات**: موردين، مواد، مشتريات، مدفوعات
5. **إدارة الآبار**: آبار، مهام، محاسبة، مصاريف، تدقيق
6. **المعدات المبسط**: معدات، حركات نقل بين مشاريع
7. **الإشعارات الموحد**: نظام إشعارات واحد مع حالات القراءة
8. **الذكاء الاصطناعي**: محادثات، رسائل، إحصائيات استخدام
9. **النسخ الاحتياطي**: نسخ يدوي/تلقائي، سجلات
10. **التقارير**: مسار واحد موحّد /reports

## معايير تقنية
- اتبع إرشادات `fullstack_js`
- استخدم مكونات `shadcn/ui` للواجهة
- سمات `data-testid` موحدة للاختبار
- جميع الردود بالعربية فقط (تفضيل المستخدم)

## التغييرات الأخيرة
- 2026-02-09: إعادة بناء نظام النسخ الاحتياطي بالكامل:
  - BackupService: node-cron جدولة، ضغط gzip، تتبع حالة حقيقي، lock، bulk insert، retention policy
  - تأمين جميع مسارات النسخ: authenticate + requireAdmin + sensitiveOperationsRateLimit
  - إضافة مسارات download و delete مع تحقق أمني من أسماء الملفات
  - إخفاء URLs قواعد البيانات من الواجهة (أمان)
  - حذف المسارات المكررة وغير المؤمنة من routes.ts و index.ts
  - إعادة كتابة واجهة backup-manager.tsx بالكامل
- 2026-02-09: حذف نظام tools المتقدم (12 جدول) - غير منفّذ
- 2026-02-09: حذف النظام المالي المتقدم (7 جداول) - غير منفّذ
- 2026-02-09: حذف نظام الموافقات والمحادثة (5 جداول) - غير منفّذ
- 2026-02-09: حذف أنظمة المراقبة (incidents, monitoringMetrics)
- 2026-02-09: توحيد 3 مسارات تقارير في مسار واحد (/reports)
- 2026-02-09: دمج إشعارات النظام في نظام إشعارات واحد
- 2026-02-09: إصلاح البيانات الوهمية (Math.random) في إحصائيات الصحة
- 2026-02-09: تنظيف schema.ts من 2,291 إلى 1,285 سطر (حذف 1,007 سطر)
- 2026-02-09: تنظيف 6 ملفات من مراجع الأنظمة المحذوفة

## تفضيلات المستخدم
- اللغة: العربية فقط - لا يفهم الإنجليزية
- النهج: احترافي مع مراجعة معمارية
- الأولوية: التنظيف والدمج قبل إضافة ميزات جديدة

## ملاحظات مهمة
- generalRateLimit معطّل مؤقتًا (مشكلة استجابة HTML)
- الملف server/modules/core/schema-backup.ts هو نسخة احتياطية مرجعية فقط
- المنفذ: 5000 (الواجهة والخادم معًا)
