import{ak as m,aK as xe,a as he,u as ue,r as l,f as B,g as M,j as e,bb as r,l as Q,b1 as _,B as i,ba as v,P as q,a2 as me,I as pe,bL as U,aA as be,a$ as z,q as V,ag as fe,af as ge,bM as ve,b0 as Y,bN as we,H as je,bO as L,bP as G,ac as ye,bQ as Ne,bK as w,V as u}from"./index-CtrRstG1.js";import{S as T}from"./sparkles-sj82eebb.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=m("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=m("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=m("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=m("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=m("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=m("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),Me=()=>e.jsx(i,{variant:"ghost",size:"icon",className:"h-9 w-9 text-slate-400 no-default-hover-elevate no-default-active-elevate",children:e.jsx(Y,{className:"h-4 w-4"})});function Le(){const{user:n}=xe(),{toast:j}=he(),[,Z]=ue(),[P,p]=l.useState(!1),[o,b]=l.useState(null),[y,d]=l.useState([{role:"assistant",content:`مرحباً بك في مركز قيادة AgentForge. لقد تم تفعيل الوكيل الجديد مع كافة الصلاحيات للوصول إلى أدوات المشروع وتحليل البيانات الاستراتيجية.

كيف يمكنني مساعدتك اليوم باستخدام قدرات AF المتقدمة؟`,timestamp:new Date}]),[x,N]=l.useState(""),[f,E]=l.useState(!1),[R,J]=l.useState(""),[k,C]=l.useState([]),[$,S]=l.useState([]),[X,F]=l.useState(!0),D=l.useRef(0),g=l.useRef(null),h=l.useRef(null),K=l.useRef(null),ee=t=>{const s=Array.from(t.target.files||[]);s.length!==0&&(C(a=>[...a,...s]),s.forEach(a=>{const c=new FileReader;c.onloadend=()=>{S(de=>[...de,c.result])},c.readAsDataURL(a)}))},te=t=>{C(s=>s.filter((a,c)=>c!==t)),S(s=>s.filter((a,c)=>c!==t))},{data:se=[]}=B({queryKey:["/api/ai/sessions"],queryFn:async()=>{try{const t=await u("/api/ai/sessions","GET");return Array.isArray(t)?t:[]}catch(t){return console.error("خطأ في جلب الجلسات:",t),[]}},enabled:!!n}),{data:ae,isLoading:H}=B({queryKey:["/api/ai/access"],queryFn:async()=>{try{return await u("/api/ai/access","GET")}catch(t){if(n?.role==="admin"||n?.role==="super_admin")return{hasAccess:!0};throw t}},retry:1,staleTime:3e4}),le=n?.role==="admin"||n?.role==="super_admin"||ae?.hasAccess;M({mutationFn:async t=>await u("/api/ai/sessions","POST",{title:t}),onSuccess:t=>{b(t.sessionId),w.invalidateQueries({queryKey:["/api/ai/sessions"]}),d([{role:"assistant",content:"بدأنا جلسة جديدة. أنا جاهز لمعالجة طلباتك واستخراج البيانات المطلوبة.",timestamp:new Date}])}});const re=M({mutationFn:async t=>{E(!0);try{let s=o;return s||(s=(await u("/api/ai/sessions","POST",{title:t.substring(0,50)+(t.length>50?"...":"")})).sessionId,b(s),w.invalidateQueries({queryKey:["/api/ai/sessions"]})),{...await u("/api/ai/chat","POST",{sessionId:s,message:t}),sessionId:s}}finally{E(!1)}},onSuccess:t=>{w.invalidateQueries({queryKey:["/api/ai/sessions"]});const s={role:"assistant",content:t.message||"عذراً، لم أتمكن من معالجة الطلب حالياً.",timestamp:new Date,steps:t.steps};d(a=>[...a,s])},onError:t=>{const s=t.response?.data?.error||t.message||"انقطع الاتصال بالخادم الذكي";j({title:"خطأ في المعالجة",description:s,variant:"destructive"})}}),ie=M({mutationFn:async t=>await u(`/api/ai/sessions/${t}`,"DELETE"),onSuccess:()=>{w.invalidateQueries({queryKey:["/api/ai/sessions"]}),o&&(b(null),A())}});l.useEffect(()=>{const t=g.current?.querySelector("[data-radix-scroll-area-viewport]");if(!t)return;const s=()=>{const a=t.scrollTop;a>D.current&&a>100?F(!1):F(!0),D.current=a};return t.addEventListener("scroll",s),()=>t.removeEventListener("scroll",s)},[]);const ne=async()=>{if(!x.trim()&&k.length===0||f)return;const t={role:"user",content:x,timestamp:new Date};d(a=>[...a,t]);const s=x;N(""),C([]),S([]),h.current&&(h.current.style.height="auto");try{await re.mutateAsync(s)}catch{}},A=()=>{b(null),d([{role:"assistant",content:`مرحباً بك في مركز القيادة الذكي. أنا الوكيل المتقدم لمساعدتك في إدارة العمليات والبيانات.

بإمكاني تحليل المشاريع، إنشاء التقارير، وأتمتة المهام الروتينية بدقة عالية. كيف يمكنني دعم أهدافك اليوم؟`,timestamp:new Date}])},ce=async t=>{if(o===t){window.innerWidth<1024&&p(!1);return}b(t),window.innerWidth<1024&&p(!1),d([{role:"assistant",content:"جاري تحميل محادثتك الاستراتيجية...",timestamp:new Date,pending:!0}]);try{const s=await u(`/api/ai/sessions/${t}/messages`,"GET");Array.isArray(s)&&(s.length===0?d([{role:"assistant",content:"هذه المحادثة فارغة حالياً. كيف يمكنني مساعدتك؟",timestamp:new Date}]):d(s.map(a=>({role:a.role,content:a.content,timestamp:new Date(a.createdAt),steps:a.steps}))))}catch{j({title:"خطأ في الاتصال",description:"تعذر تحميل رسائل الجلسة من قاعدة البيانات",variant:"destructive"})}},oe=t=>{navigator.clipboard.writeText(t),j({title:"تم النسخ",description:"النص جاهز في الحافظة"})};l.useEffect(()=>{if(g.current){const t=g.current.querySelector("[data-radix-scroll-area-viewport]");t&&setTimeout(()=>{t.scrollTop=t.scrollHeight},100)}},[y]),l.useEffect(()=>{h.current&&(h.current.style.height="auto",h.current.style.height=`${h.current.scrollHeight}px`)},[x]);const O=se.filter(t=>t.title.toLowerCase().includes(R.toLowerCase()));return H&&!n?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white dark:bg-slate-950",children:[e.jsx(r.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-full mb-4",children:e.jsx(ke,{className:"h-10 w-10 text-blue-600"})}),e.jsx("p",{className:"text-slate-500 font-medium animate-pulse",children:"جاري تهيئة الوكيل الذكي..."})]}):!le&&!H?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-950 p-4",children:e.jsx(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md w-full",children:e.jsxs(Q,{className:"p-8 text-center border-none shadow-2xl bg-white/70 backdrop-blur-2xl dark:bg-slate-900/70 rounded-[2.5rem] overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-600/10 rounded-[2rem] flex items-center justify-center mx-auto mb-6",children:e.jsx(_,{className:"h-10 w-10 text-blue-600"})}),e.jsx("h1",{className:"text-3xl font-black mb-4 tracking-tight text-slate-900 dark:text-white",children:"منطقة استراتيجية"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 leading-relaxed font-medium",children:'الوصول إلى الوكيل الذكي يتطلب مستوى صلاحيات "مسؤول نظام" لتفعيل قدرات التحليل المتقدمة.'}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:"w-full h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-600/20 transition-all hover:scale-[1.02] active:scale-[0.98] no-default-hover-elevate no-default-active-elevate",onClick:()=>Z("/"),children:"العودة للوحة التحكم"}),e.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"تواصل مع الإدارة لطلب الترقية"})]})]})]})})}):e.jsxs("div",{className:"flex h-screen bg-white dark:bg-slate-950 overflow-hidden font-sans selection:bg-blue-100 dark:selection:bg-blue-900/30",dir:"rtl",children:[e.jsx(v,{children:P&&e.jsxs(e.Fragment,{children:[e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(!1),className:"fixed inset-0 bg-slate-950/20 backdrop-blur-sm z-[140]"}),e.jsx(r.div,{initial:{width:0,opacity:0,x:20},animate:{width:260,opacity:1,x:0},exit:{width:0,opacity:0,x:20},transition:{type:"spring",damping:25,stiffness:200},className:"h-full bg-white/95 dark:bg-slate-900/95 backdrop-blur-2xl border-l border-slate-200/60 dark:border-slate-800/60 flex flex-col fixed inset-y-0 right-0 z-[150] shadow-2xl",children:e.jsxs("div",{className:"p-6 flex flex-col gap-6 h-full",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20 group",children:e.jsx(T,{className:"h-5 w-5 text-white group-hover:scale-110 transition-transform"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-black text-slate-900 dark:text-white tracking-tight",children:"AgentForge Commander"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),e.jsx("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-widest",children:"Powered by AF-Core"})]})]})]}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>p(!1),className:"rounded-xl hover:bg-white dark:hover:bg-slate-800 shadow-sm border border-transparent hover:border-slate-200 dark:hover:border-slate-700",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs(i,{onClick:A,className:"w-full h-12 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-900 dark:text-white gap-3 shadow-sm border border-slate-200 dark:border-slate-700 transition-all hover:scale-[1.02] active:scale-[0.98] font-bold rounded-xl no-default-hover-elevate no-default-active-elevate",children:[e.jsx(q,{className:"h-4 w-4 text-blue-600"}),"محادثة استراتيجية"]}),e.jsxs("div",{className:"relative group",children:[e.jsx(me,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 group-focus-within:text-blue-500 transition-colors"}),e.jsx(pe,{placeholder:"البحث في الأرشيف...",value:R,onChange:t=>J(t.target.value),className:"pr-10 h-11 bg-white/50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 focus-visible:ring-2 focus-visible:ring-blue-500/20 transition-all rounded-xl text-sm font-medium"})]}),e.jsx(U,{className:"flex-1 -mx-2 px-2",children:e.jsx("div",{className:"space-y-1.5 pb-4",children:O.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(be,{className:"h-5 w-5 text-slate-300"})}),e.jsx("p",{className:"text-xs font-bold text-slate-400",children:"لا توجد سجلات حالية"})]}):O.map(t=>e.jsx(r.div,{initial:{opacity:0,x:5},animate:{opacity:1,x:0},onClick:()=>ce(t.id),className:`group relative p-3.5 rounded-2xl cursor-pointer transition-all border ${o===t.id?"bg-white dark:bg-slate-800 border-blue-100 dark:border-blue-900/50 shadow-sm":"border-transparent hover:bg-white/40 dark:hover:bg-slate-800/40"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center transition-all ${o===t.id?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"bg-slate-100 dark:bg-slate-800 text-slate-400 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/20 group-hover:text-blue-600"}`,children:e.jsx(z,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-bold truncate ${o===t.id?"text-slate-900 dark:text-white":"text-slate-600 dark:text-slate-400"}`,children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:[t.messagesCount," تفاعل"]}),e.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsx("span",{className:"text-[10px] font-medium text-slate-400 italic",children:"نشط"})]})]}),e.jsx(i,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),ie.mutate(t.id)},className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-all hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg no-default-hover-elevate no-default-active-elevate",children:e.jsx(V,{className:"h-3.5 w-3.5"})})]})},t.id))})}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-slate-200/60 dark:border-slate-800/60 flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 flex items-center justify-center overflow-hidden border border-white dark:border-slate-600 shadow-sm",children:e.jsx("span",{className:"text-sm font-black text-slate-700 dark:text-slate-300 uppercase",children:n?.email?.[0]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white truncate tracking-tight",children:n?.email?.split("@")[0]}),e.jsx(fe,{variant:"outline",className:"text-[9px] font-black uppercase py-0 px-1.5 border-blue-200 text-blue-600 bg-blue-50/50",children:n?.role==="admin"?"Chief Architect":n?.role})]}),e.jsx(i,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl no-default-hover-elevate no-default-active-elevate",children:e.jsx(ge,{className:"h-4 w-4"})})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col relative bg-white dark:bg-slate-950 min-w-0 h-full overflow-hidden",children:[e.jsx(v,{children:X&&e.jsx(r.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"absolute top-0 left-0 right-0 z-[100] p-4 pointer-events-none",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between pointer-events-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!P&&e.jsx(i,{variant:"outline",size:"icon",onClick:()=>p(!0),className:"h-10 w-10 rounded-xl bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-all no-default-hover-elevate no-default-active-elevate",children:e.jsx(Se,{className:"h-4 w-4 text-slate-600"})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 h-10 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx(T,{className:"h-3.5 w-3.5 text-blue-600 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-slate-900 dark:text-white uppercase tracking-widest",children:"Neural Pro"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:A,className:"h-10 px-4 rounded-xl bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-slate-200 dark:border-slate-800 text-[10px] font-bold gap-2 no-default-hover-elevate no-default-active-elevate hidden sm:flex shadow-sm",children:[e.jsx(q,{className:"h-3.5 w-3.5 text-blue-600"}),"مهمة جديدة"]}),e.jsx("div",{className:"h-10 w-10 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center justify-center",children:e.jsx(Me,{})})]})]})})}),e.jsx(U,{ref:g,className:"flex-1 px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto py-24 space-y-10 pb-40",children:[y.length<=1&&!o&&e.jsxs(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"text-center py-16",children:[e.jsxs("div",{className:"relative inline-block mb-10",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-600/20 blur-[60px] rounded-full scale-150 animate-pulse"}),e.jsx("div",{className:"relative w-24 h-24 bg-gradient-to-tr from-blue-600 to-indigo-700 rounded-[2.5rem] flex items-center justify-center shadow-2xl shadow-blue-500/40 transform -rotate-6",children:e.jsx(T,{className:"h-12 w-12 text-white"})})]}),e.jsxs("h2",{className:"text-4xl sm:text-5xl font-black text-slate-900 dark:text-white mb-6 tracking-tighter leading-tight",children:["كيف يمكنني قيادة ",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600",children:"بياناتك اليوم؟"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-xl mx-auto leading-relaxed font-medium text-lg mb-16",children:"أنا وحدة الذكاء الاصطناعي المتقدمة، مصمم لتحليل أداء مشاريعك واستخراج رؤى استراتيجية من بياناتك بدقة متناهية."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 max-w-3xl mx-auto",children:[{title:"التقرير التنفيذي الشامل",desc:"ملخص ذكي لكافة العمليات الجارية",icon:ve,prompt:"أريد تقريراً تنفيذياً شاملاً عن حالة كافة المشاريع النشطة اليوم",color:"blue"},{title:"تحليل كفاءة الإنفاق",desc:"رصد الانحرافات المالية والتدفقات",icon:Y,prompt:"حلل نمط الإنفاق في آخر 30 يوماً وقارنه بالميزانيات التقديرية",color:"amber"},{title:"جرد المستحقات العمالية",desc:"كشوفات دقيقة للعمال والمهام",icon:z,prompt:"استخرج لي قائمة بالمستحقات المتبقية للعمال في المشاريع النشطة",color:"emerald"},{title:"التدقيق المالي الاستباقي",desc:"كشف الثغرات والأخطاء المحتملة",icon:_,prompt:"هل تكتشف أي تضارب أو عمليات غير منطقية في السجلات المالية الأخيرة؟",color:"rose"}].map((t,s)=>e.jsxs(r.button,{whileHover:{y:-5,scale:1.02},whileTap:{scale:.98},onClick:()=>N(t.prompt),className:"p-6 rounded-[2rem] border border-slate-200/60 dark:border-slate-800/60 bg-white dark:bg-slate-900/50 hover:bg-white dark:hover:bg-slate-900 hover:shadow-2xl hover:shadow-blue-500/10 text-right transition-all group flex items-start gap-5 relative overflow-hidden",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-slate-100 dark:bg-slate-800 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-all shadow-inner",children:e.jsx(t.icon,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1 pt-1",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-white mb-1 tracking-tight",children:t.title}),e.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest leading-none",children:t.desc})]}),e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(we,{className:"h-4 w-4 text-slate-300"})})]},s))})]}),e.jsxs("div",{className:"space-y-10",children:[y.map((t,s)=>e.jsx(r.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:s*.05},className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-3 max-w-[90%] sm:max-w-[85%] ${t.role==="user"?"flex-row":"flex-row-reverse"}`,children:[e.jsxs("div",{className:`flex-1 flex flex-col gap-1.5 ${t.role==="user"?"items-end":"items-start"}`,children:[e.jsxs("div",{className:`flex items-center gap-2 px-1 ${t.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-tighter",children:t.role==="user"?"You":"Neural Agent"}),e.jsx("span",{className:"text-[10px] text-slate-300 dark:text-slate-600",children:je(t.timestamp,"h:mm a")})]}),e.jsxs("div",{className:`flex flex-col gap-2 w-full ${t.role==="user"?"items-end":"items-start"}`,children:[t.role==="assistant"&&t.pending&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-50 dark:bg-slate-900 rounded-2xl border border-slate-200/50 dark:border-slate-800/50",children:[e.jsx(L,{className:"h-3.5 w-3.5 text-blue-500 animate-spin"}),e.jsx("span",{className:"text-xs font-bold text-blue-600 animate-pulse",children:"Working..."})]}),t.steps&&e.jsx("div",{className:"w-full max-w-sm",children:e.jsx(Q,{className:"border-slate-200/60 dark:border-slate-800/60 bg-slate-50/50 dark:bg-slate-900/50 overflow-hidden rounded-2xl",children:e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between p-3 cursor-pointer list-none hover:bg-slate-100/50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-3.5 w-3.5 text-emerald-500"}),e.jsxs("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-400",children:[t.steps.length," Completed tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] font-mono text-slate-400",children:[t.steps.filter(a=>a.status==="completed").length,"/",t.steps.length]}),e.jsx(I,{className:"h-3 w-3 text-slate-400 group-open:rotate-180 transition-transform"})]})]}),e.jsx("div",{className:"p-3 pt-0 space-y-2 border-t border-slate-200/40 dark:border-slate-800/40",children:t.steps.map((a,c)=>e.jsxs("div",{className:"flex items-center gap-3",children:[a.status==="completed"?e.jsx(G,{className:"h-3 w-3 text-emerald-500"}):a.status==="in_progress"?e.jsx(L,{className:"h-3 w-3 text-blue-500 animate-spin"}):e.jsx(ye,{className:"h-3 w-3 text-slate-300"}),e.jsx("span",{className:"text-[11px] font-medium text-slate-500",children:a.title})]},c))})]})})}),e.jsx("div",{className:`text-sm leading-relaxed whitespace-pre-wrap font-medium break-words max-w-full ${t.role==="user"?"text-slate-700 dark:text-slate-200":"text-slate-800 dark:text-slate-100"}`,children:t.content})]}),t.role==="assistant"&&!t.pending&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>oe(t.content),className:"h-7 w-7 text-slate-300 hover:text-blue-600",children:e.jsx(Ne,{className:"h-3.5 w-3.5"})}),e.jsx(i,{variant:"ghost",size:"icon",className:"h-7 w-7 text-slate-300 hover:text-blue-600",children:e.jsx(Ae,{className:"h-3.5 w-3.5"})})]})]}),e.jsx("div",{className:"flex-shrink-0 pt-1",children:e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${t.role==="user"?"bg-slate-100 dark:bg-slate-800 text-slate-500":"bg-blue-600/10 text-blue-600"}`,children:t.role==="user"?e.jsx("span",{className:"text-[10px] font-black uppercase",children:n?.email?.[0]}):e.jsx(W,{className:"h-4 w-4"})})})]})},s)),f&&e.jsx(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:e.jsxs("div",{className:"flex gap-5 max-w-[75%]",children:[e.jsx("div",{className:"w-11 h-11 rounded-2xl bg-blue-600/10 text-blue-600 flex items-center justify-center animate-pulse",children:e.jsx(W,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-[2.5rem] rounded-tl-none shadow-sm border border-slate-200/50 dark:border-slate-800/50",children:e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx(r.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1},className:"w-1.5 h-1.5 bg-blue-600 rounded-full"}),e.jsx(r.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1,delay:.2},className:"w-1.5 h-1.5 bg-blue-600 rounded-full"}),e.jsx(r.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1,delay:.4},className:"w-1.5 h-1.5 bg-blue-600 rounded-full"})]})})})]})})]})]})}),e.jsx("div",{className:"absolute bottom-6 left-0 right-0 p-4 z-[120] pointer-events-none",children:e.jsxs("div",{className:"max-w-3xl mx-auto relative group pointer-events-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-600/5 blur-2xl rounded-[1.5rem] group-focus-within:bg-blue-600/10 transition-all"}),e.jsx("div",{className:"relative bg-white/95 dark:bg-slate-900/95 backdrop-blur-2xl border border-slate-200 dark:border-slate-800 p-2 rounded-[1.5rem] shadow-none",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(v,{children:$.length>0&&e.jsx(r.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex flex-wrap gap-2 px-3 pt-2 overflow-hidden",children:$.map((t,s)=>e.jsxs("div",{className:"relative group/img",children:[e.jsx("img",{src:t,alt:"Attachment",className:"w-16 h-16 object-cover rounded-lg border border-slate-200 dark:border-slate-700"}),e.jsx("button",{onClick:()=>te(s),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover/img:opacity-100 transition-opacity",children:e.jsx(V,{className:"h-3 w-3"})})]},s))})}),e.jsx("textarea",{ref:h,placeholder:"كيف يمكنني مساعدتك في إدارة مشاريعك اليوم؟",value:x,onChange:t=>N(t.target.value),onKeyDown:t=>{t.key==="Enter"&&t.shiftKey},rows:1,className:"w-full bg-transparent border-none focus:ring-0 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 py-3 px-3 text-sm font-medium resize-none min-h-[44px] max-h-48 shadow-none"}),e.jsxs("div",{className:"flex items-center justify-between px-2 pb-1 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"file",ref:K,className:"hidden",accept:"image/*",multiple:!0,onChange:ee}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>K.current?.click(),className:"h-9 w-9 rounded-xl text-slate-400 hover:text-blue-600 no-default-hover-elevate no-default-active-elevate",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl text-slate-400 hover:text-blue-600 no-default-hover-elevate no-default-active-elevate",children:e.jsx(z,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{children:(x.trim()||k.length>0)&&e.jsx(r.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:e.jsx(i,{onClick:ne,disabled:f,size:"icon",className:"h-9 w-9 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-lg shadow-blue-600/20 transition-all hover:scale-105 active:scale-95 no-default-hover-elevate no-default-active-elevate",children:f?e.jsx(L,{className:"h-4 w-4 animate-spin"}):e.jsx(I,{className:"h-4 w-4"})})})}),!x.trim()&&k.length===0&&e.jsx("div",{className:"h-9 w-9 flex items-center justify-center bg-slate-100 dark:bg-slate-800 text-slate-300 dark:text-slate-600 rounded-xl",children:e.jsx(I,{className:"h-4 w-4"})})]})]})]})})]})})]})]})}export{Le as default};
