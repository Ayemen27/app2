import{r as N,j as e}from"./ui-D72ny688.js";import{u as v,L as m}from"./router-Fkx1fLit.js";import{c as y,u as w,a as k,C as i,b as x,d as C,e as h,f as u,g as n,A as F,M as o,h as S,B as a,K as L,L as P,F as A,i as M,j as T,k as I,l as B,I as E,m as z,n as D,S as H,t as K,o as O,s as R}from"./index-YAY_Q3ir.js";import{b as J}from"./query-D-PO3xZl.js";import"./vendor-Dazix4UH.js";import"./charts-r7lk5UyH.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),V=O({email:R().email("بريد إلكتروني غير صالح").min(1,"البريد الإلكتروني مطلوب")}),g=()=>e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-32 w-96 h-96 bg-gradient-to-br from-orange-400/20 to-red-600/20 rounded-full blur-3xl animate-blob"}),e.jsx("div",{className:"absolute -bottom-32 -left-40 w-96 h-96 bg-gradient-to-tr from-yellow-400/20 to-orange-600/20 rounded-full blur-3xl animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-red-400/20 to-pink-600/20 rounded-full blur-3xl animate-blob animation-delay-4000"})]});function Y(){const[,p]=v(),{toast:t}=w(),[b,c]=N.useState(!1),r=k({resolver:K(V),defaultValues:{email:""}}),l=J({mutationFn:async s=>{const d=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!d.ok)throw new Error("فشل في إرسال طلب استرجاع كلمة المرور");return d.json()},onSuccess:s=>{s.success?(c(!0),t({title:"تم إرسال رابط الاسترجاع",description:"يرجى التحقق من بريدك الإلكتروني"})):t({title:"خطأ في الإرسال",description:s.message,variant:"destructive"})},onError:s=>{t({title:"خطأ في استرجاع كلمة المرور",description:"حدث خطأ أثناء المعالجة",variant:"destructive"}),console.error("Forgot password error:",s)}}),f=s=>{l.mutate(s)};return b?e.jsxs("div",{className:"min-h-screen relative overflow-hidden",dir:"rtl",children:[e.jsx(g,{}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50/80 via-white/90 to-red-50/80 backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md space-y-6",children:e.jsxs(i,{className:"glass-morphism border-0 shadow-2xl backdrop-blur-xl",children:[e.jsxs(x,{className:"space-y-1 text-center pb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-lg opacity-75 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-r from-green-500 to-emerald-500 rounded-full p-4",children:e.jsx(C,{className:"w-12 h-12 text-white"})})]})}),e.jsx(h,{className:"text-2xl font-bold text-green-700",children:"تم الإرسال بنجاح"}),e.jsx(u,{className:"text-gray-600",children:"تم إرسال رابط استرجاع كلمة المرور إلى بريدك الإلكتروني"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs(F,{className:"border-green-200 bg-green-50",children:[e.jsx(o,{className:"h-4 w-4 text-green-600"}),e.jsx(S,{className:"text-green-800",children:"يرجى التحقق من صندوق الوارد في بريدك الإلكتروني واتباع التعليمات لإعادة تعيين كلمة المرور. إذا لم تجد الرسالة، تحقق من مجلد الرسائل غير المرغوب فيها."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(a,{onClick:()=>p("/login"),className:"w-full enhanced-button",children:[e.jsx(j,{className:"ml-2 h-4 w-4"}),"العودة لتسجيل الدخول"]}),e.jsx(a,{onClick:()=>c(!1),variant:"outline",className:"w-full enhanced-outline-button",children:"إرسال مرة أخرى"})]})]})]})})})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden",dir:"rtl",children:[e.jsx(g,{}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50/80 via-white/90 to-red-50/80 backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(m,{href:"/login",children:e.jsxs(a,{variant:"ghost",className:"text-gray-600 hover:text-gray-900",children:[e.jsx(j,{className:"ml-2 h-4 w-4"}),"العودة لتسجيل الدخول"]})})}),e.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600 to-red-600 rounded-full blur-lg opacity-75 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-r from-orange-600 to-red-600 rounded-full p-4",children:e.jsx(L,{className:"w-12 h-12 text-white"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:"استرجاع كلمة المرور"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"سنساعدك في استرجاع حسابك"})]})]}),e.jsxs(i,{className:"glass-morphism border-0 shadow-2xl backdrop-blur-xl",children:[e.jsxs(x,{className:"space-y-1 text-center pb-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(P,{className:"w-16 h-16 text-orange-500"})}),e.jsx(h,{className:"text-2xl font-bold text-gray-900",children:"نسيت كلمة المرور؟"}),e.jsx(u,{className:"text-gray-600",children:"لا تقلق، أدخل بريدك الإلكتروني وسنرسل لك رابط لإعادة تعيين كلمة المرور"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsx(A,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(f),className:"space-y-4",children:[e.jsx(M,{control:r.control,name:"email",render:({field:s})=>e.jsxs(T,{children:[e.jsx(I,{className:"text-gray-700 font-medium",children:"البريد الإلكتروني"}),e.jsx(B,{children:e.jsxs("div",{className:"relative group",children:[e.jsx(o,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 group-focus-within:text-orange-500 transition-colors"}),e.jsx(E,{...s,type:"email",placeholder:"أدخل بريدك الإلكتروني",className:"pr-10 enhanced-input","data-testid":"input-forgot-email"})]})}),e.jsx(z,{})]})}),e.jsx(a,{type:"submit",className:"w-full enhanced-button",disabled:l.isPending,"data-testid":"button-forgot-password",style:{background:"linear-gradient(135deg, #ea580c 0%, #dc2626 100%)"},children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"ml-2 h-4 w-4 animate-spin"}),"جارِ الإرسال..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"ml-2 h-4 w-4"}),"إرسال رابط الاسترجاع"]})})]})}),e.jsx("div",{className:"text-center space-y-2 pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["تذكرت كلمة المرور؟"," ",e.jsx(m,{href:"/login",children:e.jsx("span",{className:"text-orange-600 hover:text-orange-500 font-medium cursor-pointer",children:"تسجيل الدخول"})})]})})]})]}),e.jsx(i,{className:"bg-blue-50 border-blue-200",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[e.jsx(H,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"نصائح أمنية:"}),e.jsxs("ul",{className:"mt-1 space-y-1 text-blue-700",children:[e.jsx("li",{children:"• سيصل الرابط خلال 5 دقائق"}),e.jsx("li",{children:"• الرابط صالح لمدة ساعة واحدة فقط"}),e.jsx("li",{children:"• تحقق من مجلد الرسائل غير المرغوبة"})]})]})]})})}),e.jsxs("div",{className:"text-center text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:"© 2025 نظام إدارة المشاريع الإنشائية"}),e.jsx("p",{children:"جميع الحقوق محفوظة"})]})]})})]})}export{Y as default};
