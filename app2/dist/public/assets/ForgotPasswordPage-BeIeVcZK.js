import{r as e,j as s}from"./ui-CJhzv8np.js";import{u as a,L as t}from"./router-C0Q7qG-g.js";import{c as r,u as l,a as i,C as n,b as c,d,e as o,f as m,g as x,A as h,M as j,h as u,B as g,K as b,L as p,F as f,i as N,j as v,k as y,l as w,I as k,m as S,n as C,S as F,t as z,o as L,s as P}from"./index-BK_8jjVp.js";import{b as A}from"./query-BsPVtqKw.js";import"./vendor-BXA9EqPX.js";import"./charts-FP3zWECP.js";const E=r("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),M=L({email:P().email("بريد إلكتروني غير صالح").min(1,"البريد الإلكتروني مطلوب")}),O=()=>s.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-40 -right-32 w-96 h-96 bg-gradient-to-br from-orange-400/20 to-red-600/20 rounded-full blur-3xl animate-blob"}),s.jsx("div",{className:"absolute -bottom-32 -left-40 w-96 h-96 bg-gradient-to-tr from-yellow-400/20 to-orange-600/20 rounded-full blur-3xl animate-blob animation-delay-2000"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-red-400/20 to-pink-600/20 rounded-full blur-3xl animate-blob animation-delay-4000"})]});function T(){const[,r]=a(),{toast:L}=l(),[P,T]=e.useState(!1),q=i({resolver:z(M),defaultValues:{email:""}}),B=A({mutationFn:async e=>{const s=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("فشل في إرسال طلب استرجاع كلمة المرور");return s.json()},onSuccess:e=>{e.success?(T(!0),L({title:"تم إرسال رابط الاسترجاع",description:"يرجى التحقق من بريدك الإلكتروني"})):L({title:"خطأ في الإرسال",description:e.message,variant:"destructive"})},onError:e=>{L({title:"خطأ في استرجاع كلمة المرور",description:"حدث خطأ أثناء المعالجة",variant:"destructive"})}});return P?s.jsxs("div",{className:"min-h-screen relative overflow-hidden",dir:"rtl",children:[s.jsx(O,{}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50/80 via-white/90 to-red-50/80 backdrop-blur-sm"}),s.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md space-y-6",children:s.jsxs(n,{className:"glass-morphism border-0 shadow-2xl backdrop-blur-xl",children:[s.jsxs(c,{className:"space-y-1 text-center pb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-lg opacity-75 animate-pulse"}),s.jsx("div",{className:"relative bg-gradient-to-r from-green-500 to-emerald-500 rounded-full p-4",children:s.jsx(d,{className:"w-12 h-12 text-white"})})]})}),s.jsx(o,{className:"text-2xl font-bold text-green-700",children:"تم الإرسال بنجاح"}),s.jsx(m,{className:"text-gray-600",children:"تم إرسال رابط استرجاع كلمة المرور إلى بريدك الإلكتروني"})]}),s.jsxs(x,{className:"space-y-6",children:[s.jsxs(h,{className:"border-green-200 bg-green-50",children:[s.jsx(j,{className:"h-4 w-4 text-green-600"}),s.jsx(u,{className:"text-green-800",children:"يرجى التحقق من صندوق الوارد في بريدك الإلكتروني واتباع التعليمات لإعادة تعيين كلمة المرور. إذا لم تجد الرسالة، تحقق من مجلد الرسائل غير المرغوب فيها."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(g,{onClick:()=>r("/login"),className:"w-full enhanced-button",children:[s.jsx(E,{className:"ml-2 h-4 w-4"}),"العودة لتسجيل الدخول"]}),s.jsx(g,{onClick:()=>T(!1),variant:"outline",className:"w-full enhanced-outline-button",children:"إرسال مرة أخرى"})]})]})]})})})]}):s.jsxs("div",{className:"min-h-screen relative overflow-hidden",dir:"rtl",children:[s.jsx(O,{}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50/80 via-white/90 to-red-50/80 backdrop-blur-sm"}),s.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md space-y-6",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(t,{href:"/login",children:s.jsxs(g,{variant:"ghost",className:"text-gray-600 hover:text-gray-900",children:[s.jsx(E,{className:"ml-2 h-4 w-4"}),"العودة لتسجيل الدخول"]})})}),s.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-8",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600 to-red-600 rounded-full blur-lg opacity-75 animate-pulse"}),s.jsx("div",{className:"relative bg-gradient-to-r from-orange-600 to-red-600 rounded-full p-4",children:s.jsx(b,{className:"w-12 h-12 text-white"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:"استرجاع كلمة المرور"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"سنساعدك في استرجاع حسابك"})]})]}),s.jsxs(n,{className:"glass-morphism border-0 shadow-2xl backdrop-blur-xl",children:[s.jsxs(c,{className:"space-y-1 text-center pb-6",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(p,{className:"w-16 h-16 text-orange-500"})}),s.jsx(o,{className:"text-2xl font-bold text-gray-900",children:"نسيت كلمة المرور؟"}),s.jsx(m,{className:"text-gray-600",children:"لا تقلق، أدخل بريدك الإلكتروني وسنرسل لك رابط لإعادة تعيين كلمة المرور"})]}),s.jsxs(x,{className:"space-y-6",children:[s.jsx(f,{...q,children:s.jsxs("form",{onSubmit:q.handleSubmit(e=>{B.mutate(e)}),className:"space-y-4",children:[s.jsx(N,{control:q.control,name:"email",render:({field:e})=>s.jsxs(v,{children:[s.jsx(y,{className:"text-gray-700 font-medium",children:"البريد الإلكتروني"}),s.jsx(w,{children:s.jsxs("div",{className:"relative group",children:[s.jsx(j,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 group-focus-within:text-orange-500 transition-colors"}),s.jsx(k,{...e,type:"email",placeholder:"أدخل بريدك الإلكتروني",className:"pr-10 enhanced-input","data-testid":"input-forgot-email"})]})}),s.jsx(S,{})]})}),s.jsx(g,{type:"submit",className:"w-full enhanced-button",disabled:B.isPending,"data-testid":"button-forgot-password",style:{background:"linear-gradient(135deg, #ea580c 0%, #dc2626 100%)"},children:B.isPending?s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"ml-2 h-4 w-4 animate-spin"}),"جارِ الإرسال..."]}):s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"ml-2 h-4 w-4"}),"إرسال رابط الاسترجاع"]})})]})}),s.jsx("div",{className:"text-center space-y-2 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["تذكرت كلمة المرور؟"," ",s.jsx(t,{href:"/login",children:s.jsx("span",{className:"text-orange-600 hover:text-orange-500 font-medium cursor-pointer",children:"تسجيل الدخول"})})]})})]})]}),s.jsx(n,{className:"bg-blue-50 border-blue-200",children:s.jsx(x,{className:"p-4",children:s.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[s.jsx(F,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium",children:"نصائح أمنية:"}),s.jsxs("ul",{className:"mt-1 space-y-1 text-blue-700",children:[s.jsx("li",{children:"• سيصل الرابط خلال 5 دقائق"}),s.jsx("li",{children:"• الرابط صالح لمدة ساعة واحدة فقط"}),s.jsx("li",{children:"• تحقق من مجلد الرسائل غير المرغوبة"})]})]})]})})}),s.jsxs("div",{className:"text-center text-sm text-gray-500 space-y-1",children:[s.jsx("p",{children:"© 2025 نظام إدارة المشاريع الإنشائية"}),s.jsx("p",{children:"جميع الحقوق محفوظة"})]})]})})]})}export{T as default};
