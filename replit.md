# AXION - نظام إدارة مشاريع المقاولات
نظام متكامل لإدارة مشاريع المقاولات مبني بـ Vite + React + Express + PostgreSQL

## هيكل المشروع
- **الواجهة**: Vite + React + shadcn/ui + TailwindCSS
- **الخادم**: Express.js + Socket.IO
- **قاعدة البيانات**: PostgreSQL + Drizzle ORM
- **المشترك**: نماذج البيانات والأنواع في `shared/schema.ts`

## الأنظمة الأساسية (48 جدول)
1. **المصادقة والأمان**: تسجيل دخول/خروج، JWT، صلاحيات، سجلات تدقيق
2. **إدارة المشاريع**: إنشاء/تعديل/حذف، أنواع مشاريع، تحويلات مالية
3. **إدارة العمال**: حضور، أجور، حوالات، نثريات، تسويات
4. **الموردين والمشتريات**: موردين، مواد، مشتريات، مدفوعات
5. **إدارة الآبار**: آبار، مهام، محاسبة، مصاريف، تدقيق
6. **المعدات المبسط**: معدات، حركات نقل بين مشاريع
7. **الإشعارات الموحد**: نظام إشعارات واحد مع حالات القراءة
8. **الذكاء الاصطناعي**: محادثات، رسائل، إحصائيات استخدام
9. **النسخ الاحتياطي**: نسخ يدوي/تلقائي، سجلات
10. **التقارير**: مسار واحد موحّد /reports

## معايير تقنية
- اتبع إرشادات `fullstack_js`
- استخدم مكونات `shadcn/ui` للواجهة
- سمات `data-testid` موحدة للاختبار
- جميع الردود بالعربية فقط (تفضيل المستخدم)

## ميثاق عمل الوكيل المحترف (Professional Agent Charter)
1. **الدقة والصدق المطلق**: ممنوع المراوغة، التعميم، أو إعطاء إجابات غير مؤكدة. يتم التصريح الصريح عند عدم المعرفة.
2. **التفكير التحليلي العميق**: الالتزام بالتفكير خطوة بخطوة قبل أي إجابة أو تنفيذ برمي.
3. **الحلول الواقعية والذكية**: اختيار الحل الأكثر قابلية للتنفيذ، مع تقديم بدائل غير تقليدية وأقل كلفة عند فشل الحلول الشائعة.
4. **الشفافية والوضوح**: توضيح كافة الافتراضات قبل البناء عليها، وطلب المعلومات الناقصة بوضوح تام.
5. **منع الخداع والمجاملة**: تقديم الواقع التقني والعملي كما هو، حتى لو كان غير مريح للمستخدم. الحقيقة التقنية تتقدم على الإرضاء الزائف.
6. **منع التسرع**: تقييم كل خيار قبل اعتماده، وتجنب تقديم أول إجابة تخطر على الذهن.

## قواعد الحوكمة الصارمة (Governance Rules)
1. **سياسة المكون الموحد**: يمنع منعاً باتاً استخدام وسم `<textarea>` أو `<input>` الخام لأي إدخال نصي أو متعدد الأسطر في أي صفحة أو نموذج. يجب استخدام مكونات `Textarea` و `Input` الموحدة من `@/components/ui`.
2. **التحقق من السلوك**: أي حقل إدخال لا يدعم التوسع التلقائي (Auto-height) في حالة النصوص الطويلة أو يظهر شريط تمرير (Scrollbar) قبل الحد الأقصى يعتبر خللاً نظامياً (Systemic Bug).
3. **توحيد التجربة**: يجب أن تتطابق جميع حقول الإدخال في التطبيق من حيث السلوك، الإكمال، والاستجابة.
4. **منع الاستخدام المباشر**: أي كود يحتوي على `<textarea>` أو `<input type="text">` خارج مكتبة المكونات يعتبر مخالفة صريحة تمنع دمج الكود.
5. **الفحص الشامل**: تم إجراء فحص شامل بتاريخ 2026-02-10 للتأكد من خلو المشروع تماماً من أي عناصر إدخال خام. أي انحراف مستقبلي هو مسؤولية المطور.

## التغييرات الأخيرة
- 2026-02-10: فرض حوكمة شاملة على مكونات الإدخال النصي:
  - اعتماد `Textarea` كمعيار وحيد للإدخال متعدد الأسطر.
  - استبدال كافة التواجدات الخام بـ `Textarea` مع تفعيل `autoHeight`.
  - إضافة قيود الحوكمة في `replit.md` لضمان الاستمرارية.

## تفضيلات المستخدم
- اللغة: العربية فقط - لا يفهم الإنجليزية
- النهج: احترافي مع مراجعة معمارية
- الأولوية: التنظيف والدمج قبل إضافة ميزات جديدة

## ملاحظات مهمة
- generalRateLimit معطّل مؤقتًا (مشكلة استجابة HTML)
- الملف server/modules/core/schema-backup.ts هو نسخة احتياطية مرجعية فقط
- المنفذ: 5000 (الواجهة والخادم معًا)
