import{a as g,aP as f,f as p,g as N,j as e,bx as w,ae as i,B as k,an as v,l as a,a2 as y,aa as C,U as T,m as S,by as E,bz as R,bA as x,bB as l,bC as B,bD as t,al as U,K as q,M as H,N as K,O as M,R as d,bE as P,b3 as Q,bF as A,Q as o,X as m}from"./index-DRtpmJ9I.js";function z(){const{toast:n}=g(),{user:h}=f(),{data:b,isLoading:u,refetch:j}=p({queryKey:o.users,queryFn:async()=>await m("/api/users","GET")}),c=N({mutationFn:async({userId:s,role:r})=>await m(`/api/users/${s}/role`,"PATCH",{role:r}),onSuccess:()=>{A.invalidateQueries({queryKey:o.users}),n({title:"تم تحديث الصلاحيات",description:"تم تغيير دور المستخدم بنجاح."})},onError:s=>{n({title:"فشل التحديث",description:s.message,variant:"destructive"})}});return u?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600/10 rounded-2xl flex items-center justify-center shadow-sm",children:e.jsx(i,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"إدارة المستخدمين"}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"التحكم في مستويات الوصول وصلاحيات النظام"})]})]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>j(),className:"rounded-xl font-bold",children:[e.jsx(v,{className:"h-4 w-4 ml-2"}),"تحديث القائمة"]})]}),e.jsxs(a,{className:"border-none shadow-xl bg-white/70 backdrop-blur-xl dark:bg-slate-900/70 rounded-[2rem] overflow-hidden",children:[e.jsx(y,{className:"border-b border-slate-100 dark:border-slate-800 pb-4",children:e.jsxs(C,{className:"text-lg font-black flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-blue-500"}),"قائمة المستخدمين المسجلين"]})}),e.jsx(S,{className:"p-0",children:e.jsxs(E,{children:[e.jsx(R,{className:"bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs(x,{children:[e.jsx(l,{className:"text-right font-black",children:"المستخدم"}),e.jsx(l,{className:"text-right font-black",children:"البريد الإلكتروني"}),e.jsx(l,{className:"text-right font-black",children:"الدور الحالي"}),e.jsx(l,{className:"text-right font-black",children:"تغيير الصلاحية"})]})}),e.jsx(B,{children:b?.map(s=>e.jsxs(x,{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx(t,{className:"font-bold py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center font-black text-slate-600 dark:text-slate-400",children:s.firstName?.[0]}),e.jsxs("span",{children:[s.firstName," ",s.lastName]})]})}),e.jsx(t,{className:"font-medium text-slate-500",children:s.email}),e.jsx(t,{children:e.jsx(U,{variant:s.role==="admin"?"default":s.role==="manager"?"secondary":"outline",className:"font-black rounded-lg px-3",children:s.role==="admin"?"مدير نظام":s.role==="manager"?"مدير مشروع":"مستخدم (قراءة فقط)"})}),e.jsx(t,{children:e.jsxs(q,{defaultValue:s.role,onValueChange:r=>c.mutate({userId:s.id,role:r}),disabled:c.isPending||s.id===h?.id,children:[e.jsx(H,{className:"w-[200px] h-10 rounded-xl font-bold border-slate-200 dark:border-slate-700",children:e.jsx(K,{placeholder:"اختر الدور"})}),e.jsxs(M,{className:"rounded-xl border-slate-200 dark:border-slate-800",children:[e.jsx(d,{value:"admin",className:"font-bold",children:"مدير نظام"}),e.jsx(d,{value:"manager",className:"font-bold",children:"مدير مشروع"}),e.jsx(d,{value:"user",className:"font-bold",children:"مستخدم (قراءة فقط)"})]})]})})]},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(a,{className:"border-none shadow-lg bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-xl flex items-center justify-center shadow-lg shadow-blue-600/20",children:e.jsx(i,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-blue-600 uppercase tracking-widest",children:"مدير نظام"}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"صلاحية كاملة لجميع الأقسام والإعدادات."})]})]})}),e.jsx(a,{className:"border-none shadow-lg bg-purple-50/50 dark:bg-purple-900/10 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-600 text-white rounded-xl flex items-center justify-center shadow-lg shadow-purple-600/20",children:e.jsx(P,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-purple-600 uppercase tracking-widest",children:"مدير مشروع"}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"إدارة العمليات اليومية والمشاريع المخصصة."})]})]})}),e.jsx(a,{className:"border-none shadow-lg bg-slate-50/50 dark:bg-slate-800/10 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-600 text-white rounded-xl flex items-center justify-center shadow-lg shadow-slate-600/20",children:e.jsx(Q,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-slate-600 uppercase tracking-widest",children:"مستخدم"}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:'صلاحية "قراءة فقط" لجميع مكونات التطبيق.'})]})]})})]})]})}export{z as default};
