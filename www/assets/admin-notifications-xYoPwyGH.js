import{r as p,a as de,b as ve,aR as me,f as W,aq as ye,g as ue,Q as T,j as e,B as d,S as we,w as xe,x as he,y as Ne,z as pe,A as be,ar as ke,as as u,at as x,au as f,av as k,aB as X,aw as j,K as ee,M as ae,N as se,O as le,R as te,aS as C,aT as ge,aU as h,U as S,ae as Ce,t as Se,aV as Te,aW as Ae,aC as Pe,aD as Fe,aX as O,aE as z,aY as Ue,c as De,aZ as Ee,$ as Ie,aI as re,a_ as Re,a$ as ne,b0 as Le,i as qe,ag as Ve,ah as $e,ai as B,ac as Me,ak as K,n as Q,o as H,T as Oe,b1 as ze,b2 as ie,aj as Be,b3 as L,al as oe,ad as ce,H as _,q as Ke,b4 as Y}from"./index-QOByuYTn.js";import{S as Qe}from"./sparkles-BBCKJcAE.js";const He=Fe({type:O(["safety","task","payroll","announcement","system"]),title:z().min(1,"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ø·Ù„ÙˆØ¨"),body:z().min(1,"Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø·Ù„ÙˆØ¨"),priority:Ue().min(1).max(5),recipientType:O(["all","admins","workers","specific"]),specificUserId:z().optional(),targetPlatform:O(["all","android","web"]).default("all")}),_e=[{value:"safety",label:"ØªÙ†Ø¨ÙŠÙ‡ Ø£Ù…Ù†ÙŠ",description:"ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ø£Ù…Ø§Ù†",icon:"ğŸš¨",color:"from-red-500 to-red-600"},{value:"task",label:"Ø¥Ø´Ø¹Ø§Ø± Ù…Ù‡Ù…Ø©",description:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª",icon:"ğŸ“",color:"from-blue-500 to-blue-600"},{value:"payroll",label:"Ø¥Ø´Ø¹Ø§Ø± Ø±Ø§ØªØ¨",description:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª",icon:"ğŸ’°",color:"from-green-500 to-green-600"},{value:"announcement",label:"Ø¥Ø¹Ù„Ø§Ù† Ø¹Ø§Ù…",description:"Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ø§Ù…Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹",icon:"ğŸ“¢",color:"from-purple-500 to-purple-600"},{value:"system",label:"Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¸Ø§Ù…",description:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©",icon:"âš™ï¸",color:"from-gray-500 to-gray-600"}],Ye=[{value:1,label:"Ø­Ø±Ø¬ Ø¬Ø¯Ø§Ù‹",color:"text-red-600",bg:"bg-red-50 border-red-200"},{value:2,label:"Ø¹Ø§Ø¬Ù„",color:"text-orange-600",bg:"bg-orange-50 border-orange-200"},{value:3,label:"Ù…ØªÙˆØ³Ø·",color:"text-yellow-600",bg:"bg-yellow-50 border-yellow-200"},{value:4,label:"Ù…Ù†Ø®ÙØ¶",color:"text-blue-600",bg:"bg-blue-50 border-blue-200"},{value:5,label:"Ù…Ø¹Ù„ÙˆÙ…Ø©",color:"text-gray-600",bg:"bg-gray-50 border-gray-200"}];function We({onUpdate:A,notificationType:P="announcement",projectId:v,open:y,onOpenChange:F,showTrigger:U=!0}){const[q,D]=p.useState(!1),n=y!==void 0?y:q,c=F!==void 0?F:D,{toast:b}=de(),w=ve(),{getAccessToken:g}=me(),[Z,N]=p.useState("all"),o=()=>({"Content-Type":"application/json",Authorization:g()?`Bearer ${g()}`:""}),{data:E=[],isLoading:G}=W({queryKey:T.usersWithRoles,queryFn:async()=>{const s=await fetch("/api/users?includeRole=true",{headers:o()});if(!s.ok)throw new Error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†");return s.json()},enabled:n}),i=ye({resolver:Pe(He),defaultValues:{type:P,title:"",body:"",priority:3,recipientType:"all",specificUserId:void 0}}),m=ue({mutationFn:async s=>{let l="/api/notifications";switch(s.type){case"safety":l="/api/notifications/safety";break;case"task":l="/api/notifications/task";break;case"payroll":l="/api/notifications/payroll";break;case"announcement":l="/api/notifications/announcement";break;default:l="/api/notifications"}const r=await fetch(l,{method:"POST",headers:o(),body:JSON.stringify({...s,message:s.body,body:s.body,projectId:v,targetPlatform:s.targetPlatform||"all",recipients:s.recipientType==="specific"&&s.specificUserId?[s.specificUserId]:s.recipientType})});if(!r.ok)throw new Error("ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±");return r.json()},onSuccess:async()=>{await w.invalidateQueries({queryKey:T.notifications}),await w.invalidateQueries({queryKey:T.adminNotifications()}),b({title:"ØªÙ… Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­"}),c(!1),i.reset(),A&&A()},onError:s=>{b({title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±",variant:"destructive"})}}),V=s=>{m.mutate({...s,projectId:v,targetPlatform:s.targetPlatform,body:s.body})};return e.jsxs(e.Fragment,{children:[U&&e.jsxs(d,{onClick:()=>c(!0),className:"gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø±"]}),e.jsx(xe,{open:n,onOpenChange:c,children:e.jsxs(he,{className:"w-full max-w-[95vw] md:max-w-[600px] border-0 p-0 overflow-hidden bg-white rounded-xl md:rounded-2xl shadow-2xl",children:[e.jsx(Ne,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Qe,{className:"h-4 w-4 md:h-5 md:w-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(pe,{className:"text-base md:text-lg font-bold",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø±"}),e.jsx(be,{className:"text-blue-100 text-xs md:text-sm mt-0.5",children:"Ø£Ø±Ø³Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Ù‹ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ø¨Ø± Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…"})]})]})}),e.jsx("div",{className:"p-3 md:p-5 overflow-y-auto max-h-[80vh]",children:e.jsx(ke,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(V),className:"space-y-3 md:space-y-4",children:[e.jsx(u,{control:i.control,name:"title",render:({field:s})=>e.jsxs(x,{children:[e.jsx(f,{children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(k,{children:e.jsx(X,{...s,placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†...",className:"min-h-[44px]"})}),e.jsx(j,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(u,{control:i.control,name:"type",render:({field:s})=>e.jsxs(x,{children:[e.jsx(f,{children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsxs(ee,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(k,{children:e.jsx(ae,{children:e.jsx(se,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹"})})}),e.jsx(le,{children:_e.map(l=>e.jsx(te,{value:l.value,children:l.label},l.value))})]}),e.jsx(j,{})]})}),e.jsx(u,{control:i.control,name:"priority",render:({field:s})=>e.jsxs(x,{children:[e.jsx(f,{children:"Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©"}),e.jsxs(ee,{onValueChange:l=>s.onChange(parseInt(l)),defaultValue:s.value.toString(),children:[e.jsx(k,{children:e.jsx(ae,{children:e.jsx(se,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©"})})}),e.jsx(le,{children:Ye.map(l=>e.jsx(te,{value:l.value.toString(),children:l.label},l.value))})]}),e.jsx(j,{})]})})]}),e.jsx(u,{control:i.control,name:"targetPlatform",render:({field:s})=>e.jsxs(x,{children:[e.jsx(f,{children:"Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"Ø§Ù„Ø¬Ù…ÙŠØ¹",icon:C},{value:"android",label:"Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ ÙÙ‚Ø·",icon:ge},{value:"web",label:"Ø§Ù„ÙˆÙŠØ¨ ÙÙ‚Ø·",icon:h}].map(l=>e.jsxs(d,{type:"button",variant:s.value===l.value?"default":"outline",size:"sm",className:"gap-1.5",onClick:()=>s.onChange(l.value),children:[e.jsx(l.icon,{className:"h-3.5 w-3.5"}),l.label]},l.value))}),e.jsx(j,{})]})}),e.jsx(u,{control:i.control,name:"recipientType",render:({field:s})=>e.jsxs(x,{children:[e.jsx(f,{children:"Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠÙ†"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"Ø§Ù„Ø¬Ù…ÙŠØ¹",icon:S},{value:"admins",label:"Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†",icon:Ce},{value:"workers",label:"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†",icon:Se},{value:"specific",label:"Ù…Ø­Ø¯Ø¯",icon:Te}].map(l=>e.jsxs(d,{type:"button",variant:s.value===l.value?"default":"outline",size:"sm",className:"gap-1.5",onClick:()=>s.onChange(l.value),children:[e.jsx(l.icon,{className:"h-3.5 w-3.5"}),l.label]},l.value))}),s.value==="specific"&&e.jsx("div",{className:"mt-2",children:e.jsx(u,{control:i.control,name:"specificUserId",render:({field:l})=>e.jsxs(x,{children:[e.jsx(k,{children:e.jsx(Ae,{value:l.value||"",onValueChange:l.onChange,users:(Array.isArray(E)?E:[]).map(r=>({id:r.id,fullName:r.fullName||r.firstName||r.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…",email:r.email})),placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…..."})}),e.jsx(j,{})]})})})]})}),e.jsx(u,{control:i.control,name:"body",render:({field:s})=>e.jsxs(x,{children:[e.jsx(f,{children:"Ø§Ù„Ù…Ø­ØªÙˆÙ‰"}),e.jsx(k,{children:e.jsx(X,{...s,placeholder:"Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø©...",className:"resize-none",autoHeight:!0,minRows:4,maxRows:10})}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(d,{type:"button",variant:"outline",className:"flex-1",onClick:()=>c(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(d,{type:"submit",className:"flex-1",disabled:m.isPending,children:m.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"})]})]})})})]})})]})}function Xe(){const{toast:A}=de(),{isAuthenticated:P,getAccessToken:v,isLoading:y}=me(),[F,U]=p.useState("overview"),[q,D]=p.useState(!1),[n,c]=p.useState(null),{setFloatingAction:b,setRefreshAction:w,setShowAddButton:g}=De();p.useEffect(()=>(b(()=>{console.log("Floating action triggered"),D(!0)},"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯"),g(!0),w(null),()=>{b(null),g(!1)}),[b,w,g]);const Z=[{key:"type",label:"Ø§Ù„Ù†ÙˆØ¹",type:"select",options:[{value:"all",label:"Ø§Ù„ÙƒÙ„"},{value:"safety",label:"ØªÙ†Ø¨ÙŠÙ‡ Ø£Ù…Ù†ÙŠ"},{value:"task",label:"Ø¥Ø´Ø¹Ø§Ø± Ù…Ù‡Ù…Ø©"},{value:"payroll",label:"Ø¥Ø´Ø¹Ø§Ø± Ø±Ø§ØªØ¨"},{value:"announcement",label:"Ø¥Ø¹Ù„Ø§Ù† Ø¹Ø§Ù…"},{value:"system",label:"Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¸Ø§Ù…"}]},{key:"priority",label:"Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©",type:"select",options:[{value:"all",label:"Ø§Ù„ÙƒÙ„"},{value:"1",label:"Ø­Ø±Ø¬ Ø¬Ø¯Ø§Ù‹"},{value:"2",label:"Ø¹Ø§Ø¬Ù„"},{value:"3",label:"Ù…ØªÙˆØ³Ø·"},{value:"4",label:"Ù…Ù†Ø®ÙØ¶"},{value:"5",label:"Ù…Ø¹Ù„ÙˆÙ…Ø©"}]}],{searchValue:N,filterValues:o,onSearchChange:E,onFilterChange:G,onReset:i}=Ee({type:"all",priority:"all"},""),m=()=>({"Content-Type":"application/json",Authorization:v()?`Bearer ${v()}`:""}),{data:V,isLoading:s,refetch:l}=W({queryKey:T.adminNotifications(o,N),queryFn:async()=>{const a=new URLSearchParams({limit:"50",...o.type!=="all"&&{type:o.type},...o.priority!=="all"&&{priority:o.priority},...N&&{search:N}}),t=await fetch(`/api/notifications/all?${a}`,{headers:m()});if(!t.ok)throw new Error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return t.json()},enabled:P&&!y}),{data:r,isLoading:Ze}=W({queryKey:[T.adminNotifications,"activity"],queryFn:async()=>{const a=await fetch("/api/notifications/monitoring/stats",{headers:m()});if(!a.ok)throw new Error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø´Ø§Ø·");return a.json()},enabled:P&&!y}),fe=ue({mutationFn:async a=>{const t=await fetch(`/api/admin/notifications/${a}`,{method:"DELETE",headers:m()});if(!t.ok)throw new Error("ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù");return t.json()},onSuccess:()=>{A({title:"ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­"}),l()}}),$=V?.notifications||[],je=p.useMemo(()=>{const a=r?.total||0,t=r?.unread||0,R=r?.critical||0,M=a>0?Math.round((a-t)/a*100):0;return[{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",value:a,icon:h,color:"blue"},{title:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø­Ø±Ø¬Ø©",value:R,icon:Ie,color:"red",status:R>0?"critical":"normal"},{title:"Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©",value:`${M}%`,icon:re,color:"green",trend:{value:5,isPositive:!0}},{title:"Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",value:r?.userStats?.length||0,icon:S,color:"purple"},{title:"ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡",value:t,icon:Re,color:"orange",status:t>0?"warning":"normal"},{title:"ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø£Ù…Ù†ÙŠØ©",value:r?.typeStats?.safety||0,icon:ne,color:"amber"}]},[r]),I={1:{label:"Ø­Ø±Ø¬",color:"destructive"},critical:{label:"Ø­Ø±Ø¬",color:"destructive"},2:{label:"Ø¹Ø§Ø¬Ù„",color:"warning"},high:{label:"Ø¹Ø§Ø¬Ù„",color:"warning"},3:{label:"Ù…ØªÙˆØ³Ø·",color:"default"},medium:{label:"Ù…ØªÙˆØ³Ø·",color:"default"},4:{label:"Ù…Ù†Ø®ÙØ¶",color:"secondary"},low:{label:"Ù…Ù†Ø®ÙØ¶",color:"secondary"},5:{label:"Ù…Ø¹Ù„ÙˆÙ…Ø©",color:"outline"},info:{label:"Ù…Ø¹Ù„ÙˆÙ…Ø©",color:"outline"}},J={safety:ne,task:re,payroll:C,announcement:ie,system:Be};return e.jsx("div",{className:"min-h-screen bg-background pb-10",dir:"rtl",children:e.jsxs("main",{className:"container px-4 py-6 sm:px-8 space-y-6",children:[e.jsx(We,{open:q,onOpenChange:D,onUpdate:()=>l(),showTrigger:!1}),e.jsx(Le,{stats:je,columns:3,className:"mb-6"}),e.jsx(qe,{searchValue:N,onSearchChange:E,filters:Z,filterValues:o,onFilterChange:G,onReset:i,compact:!1,className:"w-full"}),e.jsxs(Ve,{value:F,onValueChange:U,className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:e.jsxs($e,{className:"grid w-full sm:w-auto grid-cols-3 sm:flex gap-2",children:[e.jsxs(B,{value:"overview",className:"gap-2",children:[e.jsx(Me,{className:"h-4 w-4"})," Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©"]}),e.jsxs(B,{value:"notifications",className:"gap-2",children:[e.jsx(h,{className:"h-4 w-4"})," Ø§Ù„Ø³Ø¬Ù„"]}),e.jsxs(B,{value:"users",className:"gap-2",children:[e.jsx(S,{className:"h-4 w-4"})," Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"]})]})}),e.jsx(K,{value:"overview",className:"mt-0",children:e.jsxs(Q,{columns:2,children:[e.jsx(H,{title:"Ø£ÙƒØ«Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØªÙØ§Ø¹Ù„Ø§Ù‹",titleIcon:Oe,fields:r?.userStats?.slice(0,5).map((a,t)=>({label:`${t+1}. ${a.userName}`,value:`${a.readNotifications} / ${a.totalNotifications}`,emphasis:t===0,color:t===0?"success":"default"}))||[],footer:e.jsx(d,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>U("users"),children:"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©"})}),e.jsx(H,{title:"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚Ù†ÙˆØ§Øª",titleIcon:C,fields:[{label:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",value:$.length,icon:ge,color:"info"},{label:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",value:"Ù…ÙØ¹Ù„",icon:ze,color:"success"},{label:"Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†ØµÙŠØ©",value:"Ù…ØªÙˆÙ‚Ù",icon:ie,color:"muted"},{label:"ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙÙˆØ±ÙŠØ©",value:"Ù†Ø´Ø·",icon:C,color:"warning"}]})]})}),e.jsx(K,{value:"notifications",className:"mt-0",children:e.jsx(Q,{columns:1,className:"max-w-4xl mx-auto space-y-4",children:s?Array.from({length:6}).map((a,t)=>e.jsx("div",{className:"h-24 bg-slate-100 dark:bg-slate-800 animate-pulse rounded-2xl"},t)):$.length>0?$.map(a=>{const t=I[a.priority]||I[3],R=J[a.type]||h;return e.jsxs("div",{onClick:()=>c(a),className:L("group relative flex items-start gap-4 p-4 rounded-2xl border transition-all duration-300 cursor-pointer","bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md hover:border-primary/50"),children:[e.jsx("div",{className:L("w-12 h-12 rounded-xl flex items-center justify-center shadow-sm shrink-0",a.type==="safety"?"bg-red-50 dark:bg-red-900/20":"bg-slate-50 dark:bg-slate-800"),children:e.jsx(R,{className:L("h-6 w-6",a.type==="safety"?"text-red-600":"text-primary")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white truncate",children:a.title}),e.jsx(oe,{variant:t.color,className:"text-[10px] font-bold px-2 py-0",children:t.label})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1 mb-2",children:a.message}),e.jsxs("div",{className:"flex items-center gap-4 text-[11px] text-slate-400 font-medium",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"h-3 w-3"}),e.jsx("span",{children:_(new Date(a.createdAt),"PPp",{locale:Y})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"h-3 w-3"}),e.jsx("span",{children:a.recipientType==="all"?"Ø§Ù„Ø¬Ù…ÙŠØ¹":"Ù…Ø³ØªÙ‡Ø¯Ù"})]})]})]}),e.jsx("div",{className:"flex items-center gap-1 self-center",children:e.jsx(d,{size:"icon",variant:"ghost",className:"h-9 w-9 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:M=>{M.stopPropagation(),confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±ØŸ")&&fe.mutate(a.id)},children:e.jsx(Ke,{className:"h-4 w-4"})})})]},a.id)}):e.jsxs("div",{className:"col-span-full py-20 text-center border-2 border-dashed rounded-[2rem] bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx(h,{className:"mx-auto h-16 w-16 text-muted-foreground/20 animate-pulse"}),e.jsx("h3",{className:"mt-4 text-xl font-bold",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«."})]})})}),e.jsx(K,{value:"users",className:"mt-0",children:e.jsx(Q,{columns:3,children:r?.userStats?.map(a=>e.jsx(H,{title:a.userName,subtitle:a.userEmail,titleIcon:S,fields:[{label:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø³ØªÙ„Ù…Ø©",value:a.totalNotifications,color:"info"},{label:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù‚Ø±ÙˆØ¡Ø©",value:a.readNotifications,color:"success"},{label:"Ø¢Ø®Ø± Ù†Ø´Ø§Ø·",value:a.lastReadAt?_(new Date(a.lastReadAt),"PP",{locale:Y}):"Ø£Ø¨Ø¯Ø§Ù‹",color:"muted"}],compact:!0},a.userId))})})]}),e.jsx(xe,{open:!!n,onOpenChange:a=>!a&&c(null),children:e.jsx(he,{className:"sm:max-w-lg rounded-[2rem] overflow-hidden border-none shadow-2xl p-0 gap-0",children:n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:L("h-32 w-full flex items-center justify-center relative overflow-hidden",n.type==="safety"?"bg-red-600":"bg-primary"),children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx(C,{className:"absolute -top-4 -left-4 h-32 w-32 rotate-12"}),e.jsx(h,{className:"absolute -bottom-4 -right-4 h-32 w-32 -rotate-12"})]}),e.jsx("div",{className:"w-20 h-20 rounded-3xl bg-white/20 backdrop-blur-xl flex items-center justify-center ring-4 ring-white/10 relative z-10 shadow-inner",children:(()=>{const a=J[n.type]||h;return e.jsx(a,{className:"h-10 w-10 text-white"})})()})]}),e.jsxs("div",{className:"p-8 pt-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(oe,{variant:I[n.priority]?.color,className:"mb-2",children:I[n.priority]?.label}),e.jsx(pe,{className:"text-2xl font-black text-slate-900 dark:text-white",children:n.title}),e.jsxs(be,{className:"flex items-center justify-center gap-2 font-medium",children:[e.jsx(ce,{className:"h-4 w-4 text-primary"}),_(new Date(n.createdAt),"PPPP p",{locale:Y})]})]}),e.jsx("div",{className:"p-6 rounded-[1.5rem] bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 shadow-inner",children:e.jsx("p",{className:"text-base leading-relaxed text-slate-700 dark:text-slate-300 font-medium whitespace-pre-wrap",children:n.message})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase font-bold",children:"Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù"}),e.jsx("span",{className:"text-sm font-black",children:n.recipientType==="all"?"Ø§Ù„Ø¬Ù…ÙŠØ¹":"Ù…Ø³ØªÙ‡Ø¯Ù"})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase font-bold",children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx("span",{className:"text-sm font-black",children:n.type})]})]}),e.jsx(d,{className:"w-full h-14 rounded-2xl font-black text-lg shadow-lg hover:shadow-primary/20 transition-all active:scale-[0.98]",onClick:()=>c(null),children:"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„"})]})]})})})]})})}export{Xe as default};
