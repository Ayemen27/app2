const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DB6w_xWP.js","assets/index-CgswThfB.css"])))=>i.map(i=>d[i]);
import{ap as oe,a as Ne,b as we,r as g,aq as Le,g as ke,X as W,j as e,w as de,x as xe,y as Ce,z as Pe,A as Ie,ar as Ke,Y as K,as as N,at as w,au as k,av as C,I as O,aw as P,ax as xt,K as Me,M as Ue,N as Ve,O as Oe,R as _,ay as We,B as $,az as ut,aA as ye,aB as He,aC as Qe,aD as Ge,aE as I,aF as ht,Q as B,f as ve,aG as J,l as ne,m as je,a8 as ie,a0 as H,al as ce,s as Ye,t as mt,c as gt,aH as Y,a4 as be,aI as pt,aj as ft,aJ as jt,ac as bt,i as yt,aK as vt,P as Nt,n as wt,o as kt,aL as Ct,q as Pt,D as It,aM as X,aN as le,_ as St,aO as At,aP as Dt,aQ as R,V as Et}from"./index-DB6w_xWP.js";import{U as Ft}from"./upload-BDTkljbt.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=oe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=oe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),zt=["Ù‚Ø·Ø¹Ø©","Ù…Ø¬Ù…ÙˆØ¹Ø©","ØµÙ†Ø¯ÙˆÙ‚","Ù…ØªØ±","ÙƒÙŠÙ„Ùˆ","Ù„ØªØ±","Ø·Ù†","Ø¹Ø¯Ø¯","Ø¹Ù„Ø¨Ø©","ÙƒØ±ØªÙˆÙ†"],_t=Ge({name:I().min(1,"Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø¯Ø© Ù…Ø·Ù„ÙˆØ¨"),sku:I().optional(),categoryId:I().optional(),unit:I().min(1,"Ø§Ù„ÙˆØ­Ø¯Ø© Ù…Ø·Ù„ÙˆØ¨Ø©"),quantity:ht().min(1,"Ø§Ù„Ø¹Ø¯Ø¯ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 1 Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„").default(1),status:I().min(1,"Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù…Ø·Ù„ÙˆØ¨Ø©"),condition:I().min(1,"Ø­Ø§Ù„Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© Ù…Ø·Ù„ÙˆØ¨Ø©"),description:I().optional(),purchaseDate:I().optional(),purchasePrice:I().optional(),projectId:I().nullable().optional(),imageUrl:I().optional()});function Be({open:n,onOpenChange:T,projects:i,equipment:r}){const{toast:S}=Ne(),D=we(),x=g.useRef(null),[E,a]=g.useState(null),[p,o]=g.useState(null),A=!!r,h=Le({resolver:Qe(_t),defaultValues:{name:r?.name||"",sku:r?.sku||"",categoryId:r?.categoryId||"",unit:r?.unit||"Ù‚Ø·Ø¹Ø©",quantity:r?.quantity||1,status:r?.status||"available",condition:r?.condition||"excellent",description:r?.description||"",purchaseDate:r?.purchaseDate||"",purchasePrice:r?.purchasePrice?.toString()||"",projectId:r?.projectId||null,imageUrl:r?.imageUrl||""}}),F=s=>{if(s&&s.type.startsWith("image/")){const b=new FileReader;b.onload=y=>{const M=y.target?.result;a(M),o(s),h.setValue("imageUrl",M)},b.readAsDataURL(s)}else S({title:"Ø®Ø·Ø£",description:"ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØ±Ø© ØµØ§Ù„Ø­",variant:"destructive"})},Z=s=>{x.current&&(x.current.accept="image/*",s?x.current.setAttribute("capture","environment"):x.current.removeAttribute("capture"),x.current.click())},Q=()=>{a(null),o(null),h.setValue("imageUrl",""),x.current&&(x.current.value="")},L=ke({mutationFn:s=>A&&r?.id?W(`/api/equipment/${r.id}`,"PUT",s):W("/api/equipment","POST",s),onSuccess:()=>{D.refetchQueries({predicate:s=>Array.isArray(s.queryKey)&&s.queryKey[0]==="equipment"}),D.refetchQueries({predicate:s=>Array.isArray(s.queryKey)&&s.queryKey[0]==="equipment"}),S({title:"Ù†Ø¬Ø­ Ø§Ù„Ø­ÙØ¸",description:A?"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­":"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­",variant:"default"}),h.reset(),Q(),T(!1)},onError:s=>{S({title:"Ø®Ø·Ø£",description:s.message||(A?"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø¯Ø©":"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø©"),variant:"destructive"})}});g.useEffect(()=>{r&&A&&(h.reset({name:r.name||"",sku:r.sku||"",categoryId:r.categoryId||"",unit:r.unit||"Ù‚Ø·Ø¹Ø©",quantity:r.quantity||1,status:r.status||"available",condition:r.condition||"excellent",description:r.description||"",purchaseDate:r.purchaseDate||"",purchasePrice:r.purchasePrice?.toString()||"",projectId:r.projectId||null,imageUrl:r.imageUrl||""}),r.imageUrl&&a(r.imageUrl))},[r,A,h]);const ee=s=>{const b={...s,purchasePrice:s.purchasePrice?s.purchasePrice:void 0,projectId:s.projectId||null,categoryId:s.categoryId||void 0};L.mutate(b)};return e.jsx(de,{open:n,onOpenChange:T,children:e.jsxs(xe,{className:"w-[95vw] max-w-[500px] max-h-[90vh] overflow-y-auto",dir:"rtl",children:[e.jsxs(Ce,{className:"pb-2",children:[e.jsx(Pe,{className:"text-lg",children:A?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø¯Ø©":"Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx(Ie,{className:"text-sm text-gray-600",children:A?"Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø©":"Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¹Ø¯Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"})]}),e.jsx(Ke,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(ee),className:"space-y-3",children:[e.jsxs(K,{columns:2,children:[e.jsx(N,{control:h.control,name:"name",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø¯Ø© *"}),e.jsx(C,{children:e.jsx(O,{placeholder:"Ù…Ø«Ø§Ù„: Ø­ÙØ§Ø± ØµØºÙŠØ±",className:"h-9 text-sm",...s,autoWidth:!0,maxWidth:300,"data-testid":"input-equipment-name"})}),e.jsx(P,{})]})}),e.jsx(N,{control:h.control,name:"sku",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø§Ù„ÙƒÙˆØ¯"}),e.jsx(C,{children:e.jsx(O,{placeholder:"Ù…Ø«Ø§Ù„: EQ-001",className:"h-9 text-sm",...s,"data-testid":"input-equipment-sku"})}),e.jsx(P,{})]})})]}),e.jsxs(K,{columns:3,children:[e.jsx(N,{control:h.control,name:"unit",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø§Ù„ÙˆØ­Ø¯Ø© *"}),e.jsx(C,{children:e.jsx(xt,{value:s.value,onValueChange:s.onChange,options:zt,placeholder:"Ø§Ø®ØªØ± Ø§Ù„ÙˆØ­Ø¯Ø©",allowCustom:!0,customPlaceholder:"Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©..."})}),e.jsx(P,{})]})}),e.jsx(N,{control:h.control,name:"quantity",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø§Ù„Ø¹Ø¯Ø¯ *"}),e.jsx(C,{children:e.jsx(O,{type:"number",min:1,className:"h-9 text-sm",...s,"data-testid":"input-equipment-quantity"})}),e.jsx(P,{})]})}),e.jsx(N,{control:h.control,name:"status",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø§Ù„Ø­Ø§Ù„Ø© *"}),e.jsxs(Me,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(C,{children:e.jsx(Ue,{"data-testid":"select-equipment-status",className:"h-9 text-sm",children:e.jsx(Ve,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©"})})}),e.jsxs(Oe,{children:[e.jsx(_,{value:"available",children:"Ù…ØªØ§Ø­"}),e.jsx(_,{value:"assigned",children:"Ù…Ø®ØµØµ"}),e.jsx(_,{value:"maintenance",children:"ØµÙŠØ§Ù†Ø©"}),e.jsx(_,{value:"lost",children:"Ù…ÙÙ‚ÙˆØ¯"}),e.jsx(_,{value:"consumed",children:"Ù…Ø³ØªÙ‡Ù„Ùƒ"})]})]}),e.jsx(P,{})]})})]}),e.jsxs(K,{columns:2,children:[e.jsx(N,{control:h.control,name:"condition",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© *"}),e.jsxs(Me,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(C,{children:e.jsx(Ue,{"data-testid":"select-equipment-condition",className:"h-9 text-sm",children:e.jsx(Ve,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ø¬ÙˆØ¯Ø©"})})}),e.jsxs(Oe,{children:[e.jsx(_,{value:"excellent",children:"Ù…Ù…ØªØ§Ø²"}),e.jsx(_,{value:"good",children:"Ø¬ÙŠØ¯"}),e.jsx(_,{value:"fair",children:"Ù…Ù‚Ø¨ÙˆÙ„"}),e.jsx(_,{value:"poor",children:"Ø¶Ø¹ÙŠÙ"}),e.jsx(_,{value:"damaged",children:"ØªØ§Ù„Ù"})]})]}),e.jsx(P,{})]})}),e.jsx(N,{control:h.control,name:"projectId",render:({field:s})=>{const b=[{value:"warehouse",label:"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"},...Array.isArray(i)?i.map(y=>({value:y.id,label:y.name})):[]];return e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"}),e.jsx(C,{children:e.jsx(We,{value:s.value||"warehouse",onValueChange:y=>s.onChange(y==="warehouse"?null:y),options:b,placeholder:"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹",searchPlaceholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹...",emptyText:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹",triggerClassName:"h-9 text-sm"})}),e.jsx(P,{})]})}})]}),e.jsxs(K,{columns:2,children:[e.jsx(N,{control:h.control,name:"purchaseDate",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø´Ø±Ø§Ø¡"}),e.jsx(C,{children:e.jsx(O,{type:"date",className:"h-9 text-sm",...s,"data-testid":"input-purchase-date"})}),e.jsx(P,{})]})}),e.jsx(N,{control:h.control,name:"purchasePrice",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡"}),e.jsx(C,{children:e.jsx(O,{type:"number",placeholder:"0",className:"h-9 text-sm",...s,"data-testid":"input-purchase-price"})}),e.jsx(P,{})]})})]}),e.jsx(N,{control:h.control,name:"imageUrl",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø¯Ø©"}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{ref:x,type:"file",accept:"image/*",className:"hidden",onChange:b=>{const y=b.target.files?.[0];y&&F(y)},"data-testid":"input-file-image"}),e.jsxs(K,{columns:2,children:[e.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:()=>Z(!0),className:"h-9 text-xs w-full","data-testid":"button-camera",children:[e.jsx(ut,{className:"h-4 w-4 ml-1"}),"ØªØµÙˆÙŠØ± Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§"]}),e.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:()=>Z(!1),className:"h-9 text-xs w-full","data-testid":"button-gallery",children:[e.jsx(Ft,{className:"h-4 w-4 ml-1"}),"Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø§Ù„Ù…Ø¹Ø±Ø¶"]})]}),E&&e.jsxs("div",{className:"relative w-full h-28 bg-gray-100 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("img",{src:E,alt:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:Q,className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 transition-colors","data-testid":"button-remove-image",children:e.jsx(ye,{className:"h-3 w-3"})}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:[e.jsx(Tt,{className:"h-3 w-3 inline ml-1"}),p?.name||"ØµÙˆØ±Ø© Ù…Ø­Ø¯Ø¯Ø©"]})]})]})}),e.jsx(P,{})]})}),e.jsx(N,{control:h.control,name:"description",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm font-medium",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx(C,{children:e.jsx(He,{placeholder:"ÙˆØµÙ Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ù…Ø¹Ø¯Ø©...",className:"resize-none text-sm",...s,autoHeight:!0,minRows:2,maxRows:6,"data-testid":"textarea-description"})}),e.jsx(P,{})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end pt-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>T(!1),className:"order-2 sm:order-1 h-9 text-sm","data-testid":"button-cancel",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx($,{type:"submit",disabled:L.isPending,className:"order-1 sm:order-2 h-9 text-sm","data-testid":"button-submit",children:L.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":A?"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø¯Ø©":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø©"})]})]})})]})})}const Mt=Ge({toProjectId:I().nullable(),reason:I().min(1,"Ø³Ø¨Ø¨ Ø§Ù„Ù†Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨"),performedBy:I().min(1,"Ø§Ø³Ù… Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„Ù†Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨"),notes:I().optional()});function Ut({equipment:n,open:T,onOpenChange:i,projects:r}){const{toast:S}=Ne(),D=we(),x=Le({resolver:Qe(Mt),defaultValues:{toProjectId:null,reason:"",performedBy:"",notes:""}}),E=ke({mutationFn:o=>W(`/api/equipment/${n?.id}/transfer`,"POST",o),onSuccess:async()=>{await D.invalidateQueries({queryKey:B.equipment}),await D.invalidateQueries({queryKey:B.equipmentMovements}),await D.invalidateQueries({queryKey:B.projects}),await D.invalidateQueries({queryKey:B.projectsWithStats}),S({title:"Ù†Ø¬Ø­ Ø§Ù„Ù†Ù‚Ù„",description:"ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­",variant:"default"}),x.reset(),i(!1)},onError:o=>{S({title:"Ø®Ø·Ø£",description:o.message||"ÙØ´Ù„ ÙÙŠ Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø©",variant:"destructive"})}}),a=o=>{E.mutate({...o,toProjectId:o.toProjectId||null})},p=()=>{if(!n)return"";if(!n.currentProjectId)return"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹";const o=Array.isArray(r)?r.find(A=>A.id===n.currentProjectId):void 0;return o?o.name:"Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"};return n?e.jsx(de,{open:T,onOpenChange:i,children:e.jsxs(xe,{className:"sm:max-w-[450px]",dir:"rtl",children:[e.jsxs(Ce,{className:"pb-2",children:[e.jsxs(Pe,{className:"flex items-center gap-2 text-lg",children:[e.jsx(qe,{className:"h-5 w-5"}),"Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø©"]}),e.jsxs(Ie,{className:"text-sm",children:['Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø© "',n.name,'" Ø¥Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ø¬Ø¯ÙŠØ¯']})]}),e.jsx(Ke,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(a),className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:"}),e.jsx("p",{className:"font-medium","data-testid":"text-current-location",children:p()})]}),e.jsx(qe,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯:"}),e.jsx("p",{className:"font-medium text-blue-600","data-testid":"text-new-location",children:x.watch("toProjectId")&&x.watch("toProjectId")!=="warehouse"&&r.find(o=>o.id===x.watch("toProjectId"))?.name||"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"})]})]})}),e.jsx(N,{control:x.control,name:"toProjectId",render:({field:o})=>{const h=[...!n?.currentProjectId?[]:[{value:"warehouse",label:"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"}],...r.filter(F=>F.id!==n?.currentProjectId).map(F=>({value:F.id,label:F.name}))];return e.jsxs(w,{children:[e.jsx(k,{className:"text-sm",children:"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ù‚ØµÙˆØ¯"}),e.jsx(C,{children:e.jsx(We,{value:o.value||"",onValueChange:F=>o.onChange(F==="warehouse"?null:F),options:h,placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ù‚ØµÙˆØ¯",searchPlaceholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹...",emptyText:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹",triggerClassName:"h-9"})}),e.jsx(P,{})]})}}),e.jsxs(K,{columns:2,children:[e.jsx(N,{control:x.control,name:"reason",render:({field:o})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm",children:"Ø³Ø¨Ø¨ Ø§Ù„Ù†Ù‚Ù„ *"}),e.jsx(C,{children:e.jsx(O,{placeholder:"Ø³Ø¨Ø¨ Ø§Ù„Ù†Ù‚Ù„",className:"h-9 text-sm",...o,"data-testid":"input-transfer-reason"})}),e.jsx(P,{})]})}),e.jsx(N,{control:x.control,name:"performedBy",render:({field:o})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm",children:"ØªÙ… Ø¨ÙˆØ§Ø³Ø·Ø© *"}),e.jsx(C,{children:e.jsx(O,{placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„",className:"h-9 text-sm",...o,"data-testid":"input-performed-by"})}),e.jsx(P,{})]})})]}),e.jsx(N,{control:x.control,name:"notes",render:({field:o})=>e.jsxs(w,{children:[e.jsx(k,{className:"text-sm",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"}),e.jsx(C,{children:e.jsx(He,{placeholder:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©...",className:"resize-none text-sm",...o,autoHeight:!0,minRows:2,maxRows:6,"data-testid":"textarea-transfer-notes"})}),e.jsx(P,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse pt-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>i(!1),className:"h-9 text-sm","data-testid":"button-cancel-transfer",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx($,{type:"submit",disabled:E.isPending,className:"h-9 text-sm","data-testid":"button-confirm-transfer",children:E.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ù‚Ù„...":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‚Ù„"})]})]})})]})}):null}function Vt({equipment:n,open:T,onOpenChange:i,projects:r}){const{data:S=[],isLoading:D}=ve({queryKey:B.equipmentMovementsById(n?.id??""),queryFn:async()=>{const a=localStorage.getItem("accessToken"),p=await fetch(`/api/equipment/${n?.id}/movements`,{headers:{Authorization:a?`Bearer ${a}`:""}});if(!p.ok)throw new Error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª");return p.json()},enabled:!!n?.id&&T,staleTime:3e4}),x=a=>{if(!a)return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";const p=Array.isArray(r)?r.find(o=>o.id===a):void 0;return p?p.name:"Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"},E=a=>{try{const p=new Date(a);return p.toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"})+" - "+p.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}catch{return a}};return e.jsx(de,{open:T,onOpenChange:i,children:e.jsxs(xe,{className:"w-[95vw] max-w-[900px] h-[90vh] overflow-hidden flex flex-col",dir:"rtl",children:[e.jsxs(Ce,{className:"pb-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50 -m-6 p-6 rounded-t-lg",children:[e.jsxs(Pe,{className:"flex items-center gap-3 text-xl font-bold",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(J,{className:"w-6 h-6 text-blue-700"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"text-blue-900",children:"Ø³Ø¬Ù„ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø¹Ø¯Ø©"})})]}),e.jsxs(Ie,{className:"text-sm font-normal text-blue-600 mt-1",children:[n?.name," - Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª ÙˆØ§Ù„Ø­Ø±ÙƒØ§Øª"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mt-4 px-1",children:[e.jsx(ne,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-gray-50",children:e.jsx(je,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¹Ø¯Ø©"}),e.jsx("div",{className:"font-bold text-gray-900",children:n?.code})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("div",{className:"font-bold text-gray-900 truncate",children:x(n?.currentProjectId||null)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø¯Ø©"}),e.jsx("div",{className:"font-bold text-gray-900",children:n?.type})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${n?.status==="active"?"bg-green-500":n?.status==="maintenance"?"bg-yellow-500":n?.status==="damaged"?"bg-red-500":"bg-gray-400"}`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø¯Ø©"}),e.jsx(ce,{className:`font-bold ${n?.status==="active"?"bg-green-100 text-green-800":n?.status==="maintenance"?"bg-yellow-100 text-yellow-800":n?.status==="damaged"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:n?.status==="active"?"Ù†Ø´Ø·":n?.status==="maintenance"?"ÙÙŠ Ø§Ù„ØµÙŠØ§Ù†Ø©":n?.status==="damaged"?"Ù…Ø¹Ø·Ù„":"ØºÙŠØ± Ù†Ø´Ø·"})]})]})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-xl border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-full",children:e.jsx(J,{className:"w-5 h-5 text-indigo-700"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ce,{className:"bg-indigo-100 text-indigo-800 font-bold px-3 py-1",children:[S.length," Ø­Ø±ÙƒØ©"]})})]}),D?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200"}),e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent absolute top-0 left-0"})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"})]})]}):S.length===0?e.jsx(ne,{className:"border-0 shadow-lg bg-gradient-to-br from-gray-50 to-slate-50",children:e.jsx(je,{className:"py-12 text-center",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(J,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-700",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª Ù…Ø³Ø¬Ù„Ø©"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ø­Ø±ÙƒØ§Øª Ù†Ù‚Ù„ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø¯Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†."}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-600",children:"ğŸ’¡ Ø³ØªØ¸Ù‡Ø± Ø¬Ù…ÙŠØ¹ Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù†Ù‚Ù„ Ù‡Ù†Ø§ Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„Ù‡Ø§"})})]})})}):e.jsx("div",{className:"space-y-4",children:S.map((a,p)=>e.jsx(ne,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-white to-gray-50/50",children:e.jsxs(je,{className:"p-0",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-gray-50 border-b border-gray-100",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-bold text-blue-700",children:["#",S.length-p]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-gray-900",children:["Ø­Ø±ÙƒØ© Ø±Ù‚Ù… ",S.length-p]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[e.jsx(Ye,{className:"w-3 h-3"}),E(a.movementDate)]})]})]})})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 p-4 rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(H,{className:"w-3 h-3 text-green-600"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Ù…Ù†"})]}),e.jsx("div",{className:"bg-white/70 p-3 rounded-lg border border-green-200",children:e.jsx("span",{className:"text-sm font-bold text-gray-900 block truncate",children:x(a.fromProjectId)})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx($t,{className:"w-4 h-4 text-blue-600"})})}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(H,{className:"w-3 h-3 text-blue-600"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Ø¥Ù„Ù‰"})]}),e.jsx("div",{className:"bg-white/70 p-3 rounded-lg border border-blue-200",children:e.jsx("span",{className:"text-sm font-bold text-gray-900 block truncate",children:x(a.toProjectId)})})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(mt,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Ù‚Ø§Ù… Ø¨Ø§Ù„Ù†Ù‚Ù„"}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:a.performedBy})]})]}),a.reason&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx(ie,{className:"w-4 h-4 text-amber-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Ø§Ù„Ø³Ø¨Ø¨"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:a.reason})]})]}),a.notes&&e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-yellow-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("span",{className:"text-xs",children:"ğŸ’¡"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-800 font-bold text-xs block",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©"}),e.jsx("span",{className:"text-yellow-700 text-sm break-words",children:a.notes})]})]})})]})]})]})},a.id))})]})]})]})})}function Lt(){const[n,T]=g.useState(""),[i,r]=g.useState({status:"all",type:"all",project:"all"}),[S,D]=g.useState(!1),[x,E]=g.useState(!1),[a,p]=g.useState(null),[o,A]=g.useState(!1),[h,F]=g.useState(!1),[Z,Q]=g.useState(!1),[L,ee]=g.useState(null),[s,b]=g.useState(!1),[y,M]=g.useState(!1),Xe=we(),{setFloatingAction:ue}=gt(),{toast:j}=Ne(),Je=g.useCallback((t,l)=>{r(v=>({...v,[t]:l}))},[]),Ze=g.useCallback(()=>{T(""),r({status:"all",type:"all",project:"all"}),j({title:"ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†",description:"ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ±"})},[j]);g.useEffect(()=>(ue(()=>E(!0),"Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"),()=>ue(null)),[ue]);const{data:u=[],isLoading:et,refetch:Se}=ve({queryKey:B.equipmentFiltered(n,i.status,i.type,i.project),queryFn:async()=>{const t=new URLSearchParams;n&&t.append("searchTerm",n),i.status!=="all"&&t.append("status",i.status),i.type!=="all"&&t.append("type",i.type),i.project!=="all"&&i.project!=="warehouse"?t.append("projectId",i.project):i.project==="warehouse"&&t.append("projectId","");try{const l=await W(`/api/equipment?${t}`);return l.data||l||[]}catch{throw new Error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª")}},staleTime:1800*1e3,gcTime:7200*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:0,enabled:!0}),{data:f=[]}=ve({queryKey:B.projects,queryFn:async()=>await W("/api/projects","GET"),staleTime:900*1e3,gcTime:3600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:1,retryDelay:1e3}),tt=g.useCallback(async()=>{D(!0);try{await Se(),j({title:"ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«",description:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­"})}catch{j({title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",variant:"destructive"})}finally{D(!1)}},[Se,j]),he=ke({mutationFn:async t=>await W(`/api/equipment/${t}`,"DELETE"),onSuccess:()=>{Xe.refetchQueries({predicate:t=>Array.isArray(t.queryKey)&&t.queryKey[0]==="equipment"}),j({title:"ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø¯Ø© Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹"}),b(!1)},onError:t=>{j({title:"Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø¯Ø©",description:t.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø¯Ø©",variant:"destructive"})}}),V=g.useMemo(()=>({total:Array.isArray(u)?u.length:0,totalUnits:Array.isArray(u)?u.reduce((t,l)=>t+(l.quantity||1),0):0,active:Array.isArray(u)?u.filter(t=>t.status==="active"||t.status==="available").length:0,assigned:Array.isArray(u)?u.filter(t=>t.status==="assigned").length:0,maintenance:Array.isArray(u)?u.filter(t=>t.status==="maintenance").length:0,outOfService:Array.isArray(u)?u.filter(t=>t.status==="out_of_service"||t.status==="lost").length:0,inWarehouse:Array.isArray(u)?u.filter(t=>!(t.currentProjectId||t.projectId)).length:0}),[u]),st=g.useMemo(()=>[{columns:4,gap:"sm",items:[{key:"total",label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª",value:V.total,icon:Y,color:"blue"},{key:"totalUnits",label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØ­Ø¯Ø§Øª",value:V.totalUnits,icon:be,color:"indigo"},{key:"active",label:"Ù…ØªØ§Ø­Ø©",value:V.active,icon:pt,color:"green"},{key:"assigned",label:"Ù…Ø®ØµØµØ©",value:V.assigned,icon:H,color:"purple"}]},{columns:3,gap:"sm",items:[{key:"maintenance",label:"ÙÙŠ Ø§Ù„ØµÙŠØ§Ù†Ø©",value:V.maintenance,icon:ft,color:"orange"},{key:"outOfService",label:"Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©",value:V.outOfService,icon:jt,color:"red"},{key:"inWarehouse",label:"ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹",value:V.inWarehouse,icon:bt,color:"gray"}]}],[V]),at=g.useMemo(()=>[{key:"status",label:"Ø§Ù„Ø­Ø§Ù„Ø©",type:"select",defaultValue:"all",options:[{value:"all",label:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª"},{value:"active",label:"Ù†Ø´Ø·"},{value:"available",label:"Ù…ØªØ§Ø­Ø©"},{value:"assigned",label:"Ù…Ø®ØµØµØ©"},{value:"maintenance",label:"ØµÙŠØ§Ù†Ø©"},{value:"out_of_service",label:"Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©"},{value:"inactive",label:"ØºÙŠØ± Ù†Ø´Ø·"}]},{key:"type",label:"Ø§Ù„ÙØ¦Ø©",type:"select",defaultValue:"all",options:[{value:"all",label:"Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª"},{value:"Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©",label:"Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©"},{value:"Ø£Ø¯ÙˆØ§Øª ÙŠØ¯ÙˆÙŠØ©",label:"Ø£Ø¯ÙˆØ§Øª ÙŠØ¯ÙˆÙŠØ©"},{value:"Ø£Ø¯ÙˆØ§Øª Ù‚ÙŠØ§Ø³",label:"Ø£Ø¯ÙˆØ§Øª Ù‚ÙŠØ§Ø³"},{value:"Ù…Ø¹Ø¯Ø§Øª Ù„Ø­Ø§Ù…",label:"Ù…Ø¹Ø¯Ø§Øª Ù„Ø­Ø§Ù…"},{value:"Ù…Ø¹Ø¯Ø§Øª Ø­ÙØ±",label:"Ù…Ø¹Ø¯Ø§Øª Ø­ÙØ±"},{value:"Ù…Ø¹Ø¯Ø§Øª Ù‚Ø·Ø¹",label:"Ù…Ø¹Ø¯Ø§Øª Ù‚Ø·Ø¹"},{value:"Ø£Ø¯ÙˆØ§Øª Ø±Ø¨Ø·",label:"Ø£Ø¯ÙˆØ§Øª Ø±Ø¨Ø·"},{value:"Ù…ÙˆØ§Ø¯ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©",label:"Ù…ÙˆØ§Ø¯ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©"},{value:"Ù…Ø¹Ø¯Ø§Øª Ø£Ù…Ø§Ù†",label:"Ù…Ø¹Ø¯Ø§Øª Ø£Ù…Ø§Ù†"},{value:"Ø£Ø¯ÙˆØ§Øª Ù†Ù‚Ù„",label:"Ø£Ø¯ÙˆØ§Øª Ù†Ù‚Ù„"}]},{key:"project",label:"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹",type:"select",defaultValue:"all",options:[{value:"all",label:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹"},{value:"warehouse",label:"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"},...Array.isArray(f)?f.map(t=>({value:t.id,label:t.name})):[]]}],[f]),rt=t=>{const l={active:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",available:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",assigned:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",maintenance:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300",out_of_service:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300",lost:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300",inactive:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"};return l[t]||l.active},te=t=>({active:"Ù†Ø´Ø·",available:"Ù…ØªØ§Ø­Ø©",assigned:"Ù…Ø®ØµØµØ©",maintenance:"ØµÙŠØ§Ù†Ø©",out_of_service:"Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©",lost:"Ù…ÙÙ‚ÙˆØ¯Ø©",inactive:"ØºÙŠØ± Ù†Ø´Ø·"})[t]||t,lt=t=>({active:"success",available:"success",assigned:"secondary",maintenance:"warning",out_of_service:"destructive",lost:"destructive",inactive:"secondary"})[t]||"secondary",nt=t=>({active:"#22c55e",maintenance:"#eab308",out_of_service:"#ef4444",inactive:"#6b7280"})[t]||"#6b7280",it=t=>{p(t),b(!0)},Ae=(t,l)=>{l?.stopPropagation(),p(t),F(!0)},De=(t,l)=>{p(t),A(!0)},Ee=(t,l)=>{p(t),Q(!0)},Fe=(t,l)=>{confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø¯Ø© "${t.name}" Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ

Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.`)&&he.mutate(t.id)},me=()=>Array.isArray(u)?u:[],ct=async()=>{const t=me();if(t.length===0){j({title:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø¯Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±",description:"ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©",variant:"destructive"});return}try{M(!0);const l=await St(()=>import("./index-DB6w_xWP.js").then(d=>d.e),__vite__mapDeps([0,1])),v=new l.Workbook;v.creator=At.name,v.lastModifiedBy="Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª",v.created=new Date,v.modified=new Date;const m=v.addWorksheet("ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª");m.views=[{rightToLeft:!0}];const ge=i.project==="all"?"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹":i.project==="warehouse"?"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹":(Array.isArray(f)?f.find(d=>d.id===i.project)?.name:void 0)||"Ù…Ø´Ø±ÙˆØ¹ Ù…Ø­Ø¯Ø¯";let se=Dt(m,"ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠ",`Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${ge}`,[`ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${le(new Date().toISOString().split("T")[0])}`,`Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: ${t.length}`,`Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${t.filter(d=>d.status==="active").length}`,`ÙÙŠ Ø§Ù„ØµÙŠØ§Ù†Ø©: ${t.filter(d=>d.status==="maintenance").length}`]);const ae=["Ø§Ù„ÙƒÙˆØ¯","Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø¯Ø©","Ø§Ù„Ø¹Ø¯Ø¯","Ø§Ù„ÙˆØ­Ø¯Ø©","Ø§Ù„ÙØ¦Ø©","Ø§Ù„Ø­Ø§Ù„Ø©","Ø§Ù„Ù…ÙˆÙ‚Ø¹","Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø´Ø±Ø§Ø¡","Ø§Ù„ÙˆØµÙ"],pe=m.addRow(ae);ae.forEach((d,G)=>{const z=pe.getCell(G+1);z.font=R.fonts.header,z.fill={type:"pattern",pattern:"solid",fgColor:{argb:R.colors.headerBg}},z.border={top:R.borders.medium,bottom:R.borders.medium,left:R.borders.thin,right:R.borders.thin},z.alignment={horizontal:"center",vertical:"middle"}}),m.getColumn(1).width=15,m.getColumn(2).width=25,m.getColumn(3).width=10,m.getColumn(4).width=12,m.getColumn(5).width=15,m.getColumn(6).width=15,m.getColumn(7).width=25,m.getColumn(8).width=18,m.getColumn(9).width=15,m.getColumn(10).width=30,se++,t.forEach((d,G)=>{const z=d.currentProjectId||d.projectId,fe=z?(Array.isArray(f)?f.find(U=>U.id===z)?.name:void 0)||"Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ":"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹";m.addRow([d.code,d.name,d.quantity||1,d.unit||"Ù‚Ø·Ø¹Ø©",d.type||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",te(d.status),fe,d.purchasePrice?X(Number(d.purchasePrice)):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",d.purchaseDate?le(d.purchaseDate):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",d.description||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]).eachCell((U,_e)=>{U.font=R.fonts.data,U.border={top:R.borders.thin,bottom:R.borders.thin,left:R.borders.thin,right:R.borders.thin},U.alignment={horizontal:"center",vertical:"middle"},_e===6&&d.purchasePrice&&(U.numFmt='#,##0 "Ø±ÙŠØ§Ù„"',U.alignment={horizontal:"left",vertical:"middle"}),_e===8&&(U.alignment={horizontal:"right",vertical:"middle"}),G%2===0&&(U.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFF9FAFB"}})}),se++});const c=`ÙƒØ´Ù_Ø§Ù„Ù…Ø¹Ø¯Ø§Øª_${i.project==="all"?"Ø¬Ù…ÙŠØ¹_Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹":i.project==="warehouse"?"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹":(Array.isArray(f)?f.find(d=>d.id===i.project)?.name:void 0)?.replace(/\s/g,"_")||"Ù…Ø´Ø±ÙˆØ¹_Ù…Ø­Ø¯Ø¯"}_${new Date().toISOString().split("T")[0]}.xlsx`,q=await v.xlsx.writeBuffer(),re=await Et(q,c);j(re?{title:"ØªÙ… ØªØµØ¯ÙŠØ± ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­",description:`ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù: ${c}`}:{title:"ØªØ¹Ø°Ø± Ø§Ù„ØªÙ†Ø²ÙŠÙ„",description:"ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ù„Ù Ù„ÙƒÙ† ÙØ´Ù„ Ø§Ù„ØªÙ†Ø²ÙŠÙ„. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",variant:"destructive"})}catch(l){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Excel:",l),j({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØµØ¯ÙŠØ± ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª",variant:"destructive"})}finally{M(!1)}},$e=(t,l)=>{const v=new Date().toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"}),m=t.reduce((c,q)=>c+(Number(q.purchasePrice)||0),0),ge=t.reduce((c,q)=>c+(q.quantity||1),0),se=t.filter(c=>c.status==="active"||c.status==="available").length,ae=t.filter(c=>c.status==="assigned").length,pe=t.filter(c=>c.status==="maintenance").length,ze=t.map((c,q)=>{const re=c.currentProjectId||c.projectId,d=re?(Array.isArray(f)?f.find(fe=>fe.id===re)?.name:void 0)||"Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ":"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹",G=q%2===0?"":"background:#f1f5f9;",z=c.status==="active"||c.status==="available"?"#16a34a":c.status==="assigned"?"#7c3aed":c.status==="maintenance"?"#ea580c":"#dc2626";return`<tr style="${G}">
        <td style="padding:10px 8px;text-align:center;border:1px solid #cbd5e1;font-size:12px;font-weight:600;color:#1e40af;">${c.code||"-"}</td>
        <td style="padding:10px 8px;text-align:right;border:1px solid #cbd5e1;font-size:12px;font-weight:500;">${c.name}</td>
        <td style="padding:10px 8px;text-align:center;border:1px solid #cbd5e1;font-size:12px;">${c.quantity||1}</td>
        <td style="padding:10px 8px;text-align:center;border:1px solid #cbd5e1;font-size:12px;">${c.unit||"Ù‚Ø·Ø¹Ø©"}</td>
        <td style="padding:10px 8px;text-align:center;border:1px solid #cbd5e1;font-size:12px;">${c.type||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}</td>
        <td style="padding:10px 8px;text-align:center;border:1px solid #cbd5e1;font-size:12px;"><span style="background:${z}15;color:${z};padding:3px 10px;border-radius:12px;font-weight:600;font-size:11px;">${te(c.status)}</span></td>
        <td style="padding:10px 8px;text-align:center;border:1px solid #cbd5e1;font-size:12px;">${d}</td>
        <td style="padding:10px 8px;text-align:left;border:1px solid #cbd5e1;font-size:12px;font-weight:500;">${c.purchasePrice?X(Number(c.purchasePrice)):"-"}</td>
        <td style="padding:10px 8px;text-align:center;border:1px solid #cbd5e1;font-size:11px;">${c.purchaseDate?le(c.purchaseDate):"-"}</td>
      </tr>`}).join("");return`<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª - ${l}</title>
  <style>
    @page { margin: 1.5cm 1cm; size: A4 landscape; }
    @media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } .no-print { display: none !important; } }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', Tahoma, Arial, sans-serif; direction: rtl; background: #fff; color: #1e293b; padding: 0; }
    .page-wrap { max-width: 1100px; margin: 0 auto; padding: 20px; }
    .header { background: linear-gradient(135deg, #1e3a5f 0%, #2563eb 100%); color: #fff; padding: 24px 30px; border-radius: 10px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
    .header-right h1 { font-size: 20px; margin-bottom: 4px; }
    .header-right p { font-size: 12px; opacity: 0.85; }
    .header-left { text-align: left; font-size: 12px; opacity: 0.9; line-height: 1.8; }
    .stats-bar { display: flex; gap: 12px; margin-bottom: 18px; flex-wrap: wrap; }
    .stat-box { flex: 1; min-width: 120px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px 16px; text-align: center; }
    .stat-box .val { font-size: 22px; font-weight: 700; color: #1e40af; }
    .stat-box .lbl { font-size: 11px; color: #64748b; margin-top: 2px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 16px; }
    thead th { background: #1e3a5f; color: #fff; padding: 12px 8px; text-align: center; font-size: 12px; font-weight: 700; border: 1px solid #1e3a5f; }
    .footer { text-align: center; font-size: 10px; color: #94a3b8; margin-top: 16px; border-top: 1px solid #e2e8f0; padding-top: 10px; }
  </style>
</head>
<body>
  <div class="page-wrap">
    <div class="header">
      <div class="header-right">
        <h1>Ø§Ù„ÙØªÙŠÙ†ÙŠ Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©</h1>
        <p>ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠ - ${l}</p>
      </div>
      <div class="header-left">
        <div>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${v}</div>
        <div>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: ${t.length} | Ø§Ù„ÙˆØ­Ø¯Ø§Øª: ${ge}</div>
      </div>
    </div>
    <div class="stats-bar">
      <div class="stat-box"><div class="val">${t.length}</div><div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª</div></div>
      <div class="stat-box"><div class="val" style="color:#16a34a;">${se}</div><div class="lbl">Ù…ØªØ§Ø­Ø©</div></div>
      <div class="stat-box"><div class="val" style="color:#7c3aed;">${ae}</div><div class="lbl">Ù…Ø®ØµØµØ©</div></div>
      <div class="stat-box"><div class="val" style="color:#ea580c;">${pe}</div><div class="lbl">ÙÙŠ Ø§Ù„ØµÙŠØ§Ù†Ø©</div></div>
      <div class="stat-box"><div class="val" style="color:#1e40af;">${m>0?X(m):"-"}</div><div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©</div></div>
    </div>
    <table>
      <thead>
        <tr>
          <th style="width:80px;">Ø§Ù„ÙƒÙˆØ¯</th>
          <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø¯Ø©</th>
          <th style="width:55px;">Ø§Ù„Ø¹Ø¯Ø¯</th>
          <th style="width:65px;">Ø§Ù„ÙˆØ­Ø¯Ø©</th>
          <th style="width:100px;">Ø§Ù„ÙØ¦Ø©</th>
          <th style="width:85px;">Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th style="width:120px;">Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th style="width:100px;">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>
          <th style="width:90px;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø´Ø±Ø§Ø¡</th>
        </tr>
      </thead>
      <tbody>${ze}</tbody>
    </table>
    <div class="footer">ØªÙ… Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… AXION - ${v}</div>
  </div>
</body>
</html>`},Te=()=>i.project==="all"?"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹":i.project==="warehouse"?"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹":(Array.isArray(f)?f.find(t=>t.id===i.project)?.name:void 0)||"Ù…Ø´Ø±ÙˆØ¹ Ù…Ø­Ø¯Ø¯",Re=t=>{const l=window.open("","_blank","width=1100,height=800");return l?(l.document.write(t),l.document.close(),l.focus(),setTimeout(()=>{l.print()},400),!0):(j({title:"ØªØ¹Ø°Ø± ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©",description:"ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­",variant:"destructive"}),!1)},ot=()=>{const t=me();if(t.length===0){j({title:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø¯Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±",description:"ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©",variant:"destructive"});return}try{M(!0);const l=$e(t,Te());Re(l)&&j({title:"Ø¬Ø§Ù‡Ø² Ù„Ù„Ø­ÙØ¸ ÙƒÙ€ PDF",description:"Ø§Ø®ØªØ± 'Ø­ÙØ¸ ÙƒÙ€ PDF' Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©"})}catch(l){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± PDF:",l),j({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØµØ¯ÙŠØ± ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª",variant:"destructive"})}finally{M(!1)}},dt=()=>{const t=me();if(t.length===0){j({title:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø¯Ø§Øª Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©",description:"ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©",variant:"destructive"});return}try{M(!0);const l=$e(t,Te());Re(l)&&j({title:"Ø¬Ø§Ù‡Ø² Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©",description:"ØªÙ… ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©"})}catch(l){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©:",l),j({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©",variant:"destructive"})}finally{M(!1)}};return et?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª..."})]})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-4",dir:"rtl",children:[e.jsx(yt,{statsRows:st,searchValue:n,onSearchChange:T,searchPlaceholder:"Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯...",filters:at,filterValues:i,onFilterChange:Je,onReset:Ze,onRefresh:tt,isRefreshing:S,actions:[{key:"export-excel",icon:vt,label:"Excel",onClick:ct,variant:"outline",disabled:u.length===0||y,loading:y,tooltip:"ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel"},{key:"export-pdf",icon:ie,label:"PDF",onClick:ot,variant:"outline",disabled:u.length===0||y,loading:y,tooltip:"ØªØµØ¯ÙŠØ± ÙƒÙ…Ù„Ù PDF"},{key:"print",icon:Rt,label:"Ø·Ø¨Ø§Ø¹Ø©",onClick:dt,variant:"outline",disabled:u.length===0||y,tooltip:"Ø·Ø¨Ø§Ø¹Ø© ÙƒØ´Ù Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"}]}),u.length===0?e.jsxs(ne,{className:"p-8 text-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"text-gray-400",children:e.jsx(Y,{className:"h-16 w-16 mx-auto opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mt-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø¯Ø§Øª"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø¹Ø¯Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©"}),e.jsxs($,{onClick:()=>E(!0),className:"bg-blue-500 hover:bg-blue-600 text-white mt-4",children:[e.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"]})]}):e.jsx(wt,{columns:3,children:Array.isArray(u)&&u.map(t=>{const l=t.currentProjectId||t.projectId,v=l?(Array.isArray(f)?f.find(m=>m.id===l)?.name:void 0)||"Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ":"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹";return e.jsx(kt,{title:t.name,subtitle:t.code,titleIcon:Y,headerColor:nt(t.status),onClick:()=>it(t),badges:[{label:te(t.status),variant:lt(t.status)},...t.type?[{label:t.type,variant:"secondary"}]:[]],fields:[{label:"Ø§Ù„Ø¹Ø¯Ø¯",value:`${t.quantity||1} ${t.unit||"Ù‚Ø·Ø¹Ø©"}`,icon:be,emphasis:(t.quantity||1)>1},{label:"Ø§Ù„Ù…ÙˆÙ‚Ø¹",value:v,icon:H},{label:"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡",value:t.purchasePrice?X(Number(t.purchasePrice)):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",icon:It,emphasis:!!t.purchasePrice,color:t.purchasePrice?"success":"muted"},{label:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø´Ø±Ø§Ø¡",value:t.purchaseDate?le(t.purchaseDate):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",icon:Ye},...t.description?[{label:"Ø§Ù„ÙˆØµÙ",value:t.description,icon:Y}]:[]],actions:[{icon:Ct,label:"ØªØ¹Ø¯ÙŠÙ„",onClick:()=>De(t)},{icon:J,label:"Ø§Ù„Ø³Ø¬Ù„",onClick:()=>Ee(t)},{icon:Pt,label:"Ø­Ø°Ù",variant:"ghost",onClick:()=>Fe(t)}],footer:e.jsx($,{onClick:m=>{m.stopPropagation(),Ae(t,m)},className:"w-full bg-blue-500 hover:bg-blue-600 text-white text-sm",size:"sm",children:"Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø©"}),compact:!0},t.id)})}),e.jsx(Be,{open:x,onOpenChange:E,projects:f}),e.jsx(Be,{open:o,onOpenChange:A,projects:f,equipment:a}),e.jsx(Ut,{equipment:a,open:h,onOpenChange:F,projects:f}),e.jsx(Vt,{equipment:a,open:Z,onOpenChange:Q,projects:f}),e.jsx(de,{open:s,onOpenChange:b,children:e.jsx(xe,{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-3xl p-0 overflow-hidden border-0 shadow-2xl",children:a&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>b(!1),className:"absolute top-4 right-4 z-10 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors",children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx("div",{className:"relative h-48 bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(Y,{className:"h-16 w-16 text-white opacity-50"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a.name}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[e.jsx(ce,{className:`text-xs ${rt(a.status)}`,children:te(a.status)}),e.jsx(ce,{variant:"outline",className:"text-xs",children:a.code})]})]}),a.purchasePrice&&e.jsxs("div",{className:"text-center bg-orange-100 dark:bg-orange-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:X(Number(a.purchasePrice))})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Ø§Ù„Ø¹Ø¯Ø¯"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.quantity||1," ",a.unit||"Ù‚Ø·Ø¹Ø©"]})]})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.currentProjectId||a.projectId?f.find(t=>t.id===(a.currentProjectId||a.projectId))?.name||"Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ":"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx($,{onClick:()=>{b(!1),De(a)},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full py-3 font-medium text-sm",children:"ØªØ¹Ø¯ÙŠÙ„"}),e.jsxs($,{onClick:()=>{b(!1),Ee(a)},className:"bg-purple-500 hover:bg-purple-600 text-white rounded-full py-3 font-medium text-sm flex items-center gap-1 justify-center",children:[e.jsx(J,{className:"w-4 h-4"}),"Ø§Ù„Ø³Ø¬Ù„"]}),e.jsx($,{onClick:()=>{b(!1),Fe(a)},disabled:he.isPending,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-full py-3 font-medium text-sm",children:he.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...":"Ø­Ø°Ù"}),e.jsx($,{onClick:()=>{b(!1),Ae(a)},className:"bg-green-500 hover:bg-green-600 text-white rounded-full py-3 font-medium text-sm",children:"Ù†Ù‚Ù„"})]})]})]})})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>ee(null),children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:()=>ee(null),className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:e.jsx(ye,{size:24})}),e.jsx("img",{src:L,alt:"ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø¯Ø© Ø¨Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙƒØ§Ù…Ù„",className:"max-w-full max-h-[90vh] object-contain rounded-lg"})]})})]})}export{Lt as EquipmentManagement,Lt as default};
