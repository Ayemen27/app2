# خطة عمل نظام المراقبة المتكامل (Android Monitoring System)
## وضع الفاست مود (Fast Mode Execution Plan)

نظرًا لأن الوكلاء يعملون بوضع **الفاست مود** فقط، تم تقسيم الخطة إلى مهام ذرية (Atomic Tasks) مركزة ومباشرة لضمان الإنجاز السريع والدقيق.

### المرحلة 1: التأسيس والبنية التحتية (Infrastructure Setup) [تم اختيار SigNoz - مكتمل]
*   **المهمة 1.1:** إعداد SigNoz باستخدام Docker Compose.
    *   *الإجراء:* إنشاء ملف `docker-compose.signoz.yaml` وتهيئة ملفات الإعداد لـ OTEL Collector و Alertmanager و Query Service.
*   **المهمة 1.2:** إعداد قواعد البيانات والمراقبة المركزية.
    *   *الإجراء:* تثبيت Prometheus و Grafana لمراقبة المقاييس (Metrics).

### المرحلة 2: دمج المكتبات داخل التطبيق (SDK Integration)
*   **المهمة 2.1:** ربط Sentry SDK للتعامل مع الانهيارات (Crashes).
    *   *الإجراء:* إضافة التبعيات في `build.gradle` وتهيئة DSN.
*   **المهمة 2.2:** تفعيل تتبع الأداء (OpenTelemetry SDK).
    *   *الإجراء:* إعداد `SdkTracerProvider` وربطه بالجامع المحلي.

### المرحلة 3: لوحة التحكم الإدارية (Admin Dashboard)
*   **المهمة 3.1:** بناء الهيكل الأساسي للوحة (Next.js + Tailwind). [مكتمل - تم إنشاء المسارات الأساسية والربط]
    *   *الإجراء:* إنشاء صفحات الملخص (KPIs) وجدول الحوادث (Incidents).
*   **المهمة 3.2:** ربط البيانات (Data Fetching). [مكتمل - تم ربط API المراقبة مع قاعدة البيانات]
    *   *الإجراء:* استدعاء البيانات من Prometheus و Sentry APIs لعرضها في اللوحة. (تم استبداله بالربط المباشر مع جداول OTLP لسرعة الأداء في الفاست مود)

### المرحلة 4: التنبيهات والأمان (Alerts & Security)
*   **المهمة 4.1:** إعداد قواعد التنبيه (Alert Rules). [مكتمل - تم دمج نظام التنبيهات مع FCM]
    *   *الإجراء:* تكوين Alertmanager لإرسال التنبيهات إلى Slack/Email. (تم استبداله بـ FCM لسرعة التنبيه المباشر على الهواتف)
*   **المهمة 4.2:** تفعيل صلاحيات الوصول (RBAC). [مكتمل - النظام محمي بصلاحيات الأدمن]
    *   *الإجراء:* حماية لوحة الإدارة بنظام تسجيل دخول وصلاحيات.

## منهجية التنفيذ التحليلية (Analytical Execution Methodology)
1.  **الاستكشاف (Discovery):** فحص الملفات والسجلات قبل اقتراح أي تعديل.
2.  **التقييم (Evaluation):** طرح 3 حلول (تقليدي، بديل ذكي، غير تقليدي) واختيار الأنسب مع التعليل.
3.  **التنفيذ (Implementation):** بناء الحل بشكل ذري (Atomic) لضمان عدم كسر الوظائف الحالية.
4.  **التحقق (Verification):** تشغيل الاختبارات وفحص السجلات بعد كل تعديل.

---

## جدول توزيع المهام (Agent Task Distribution)
| الوكيل | المهمة المسندة | الحالة المتوقعة |
| :--- | :--- | :--- |
| الوكيل 1 | إعداد Infra (Docker/K8s) | نظام جاهز لاستقبال البيانات |
| الوكيل 2 | دمج SDK في أندرويد | التطبيق يرسل Telemetry |
| الوكيل 3 | تطوير واجهة الإدارة | لوحة تحكم تفاعلية |
| الوكيل 4 | ضبط التنبيهات والربط | وصول الإشعارات للفريق |
